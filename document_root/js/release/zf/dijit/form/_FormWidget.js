/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["dijit.form._FormWidget"]){dojo._hasResource["dijit.form._FormWidget"]=true;dojo.provide("dijit.form._FormWidget");dojo.require("dijit._Widget");dojo.require("dijit._Templated");dojo.require("dijit._CssStateMixin");dojo.declare("dijit.form._FormWidget",[dijit._Widget,dijit._Templated,dijit._CssStateMixin],{name:"",alt:"",value:"",type:"text",tabIndex:"0",disabled:false,intermediateChanges:false,scrollOnFocus:true,attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{value:"focusNode",id:"focusNode",tabIndex:"focusNode",alt:"focusNode",title:"focusNode"}),postMixInProperties:function(){this.nameAttrSetting=this.name?("name='"+this.name+"'"):"";this.inherited(arguments);},_setDisabledAttr:function(_1){this.disabled=_1;dojo.attr(this.focusNode,"disabled",_1);if(this.valueNode){dojo.attr(this.valueNode,"disabled",_1);}dijit.setWaiState(this.focusNode,"disabled",_1);if(_1){this._hovering=false;this._active=false;this.focusNode.setAttribute("tabIndex","-1");}else{this.focusNode.setAttribute("tabIndex",this.tabIndex);}},setDisabled:function(_2){dojo.deprecated("setDisabled("+_2+") is deprecated. Use attr('disabled',"+_2+") instead.","","2.0");this.attr("disabled",_2);},_onFocus:function(e){if(this.scrollOnFocus){dijit.scrollIntoView(this.domNode);}this.inherited(arguments);},isFocusable:function(){return !this.disabled&&!this.readOnly&&this.focusNode&&(dojo.style(this.domNode,"display")!="none");},focus:function(){dijit.focus(this.focusNode);},compare:function(_3,_4){if(typeof _3=="number"&&typeof _4=="number"){return (isNaN(_3)&&isNaN(_4))?0:_3-_4;}else{if(_3>_4){return 1;}else{if(_3<_4){return -1;}else{return 0;}}}},onChange:function(_5){},_onChangeActive:false,_handleOnChange:function(_6,_7){this._lastValue=_6;if(this._lastValueReported==undefined&&(_7===null||!this._onChangeActive)){this._resetValue=this._lastValueReported=_6;}if((this.intermediateChanges||_7||_7===undefined)&&((typeof _6!=typeof this._lastValueReported)||this.compare(_6,this._lastValueReported)!=0)){this._lastValueReported=_6;if(this._onChangeActive){if(this._onChangeHandle){clearTimeout(this._onChangeHandle);}this._onChangeHandle=setTimeout(dojo.hitch(this,function(){this._onChangeHandle=null;this.onChange(_6);}),0);}}},create:function(){this.inherited(arguments);this._onChangeActive=true;},destroy:function(){if(this._onChangeHandle){clearTimeout(this._onChangeHandle);this.onChange(this._lastValueReported);}this.inherited(arguments);},setValue:function(_8){dojo.deprecated("dijit.form._FormWidget:setValue("+_8+") is deprecated.  Use attr('value',"+_8+") instead.","","2.0");this.attr("value",_8);},getValue:function(){dojo.deprecated(this.declaredClass+"::getValue() is deprecated. Use attr('value') instead.","","2.0");return this.attr("value");}});dojo.declare("dijit.form._FormValueWidget",dijit.form._FormWidget,{readOnly:false,attributeMap:dojo.delegate(dijit.form._FormWidget.prototype.attributeMap,{value:"",readOnly:"focusNode"}),_setReadOnlyAttr:function(_9){this.readOnly=_9;dojo.attr(this.focusNode,"readOnly",_9);dijit.setWaiState(this.focusNode,"readonly",_9);},postCreate:function(){this.inherited(arguments);if(dojo.isIE){this.connect(this.focusNode||this.domNode,"onkeydown",this._onKeyDown);}if(this._resetValue===undefined){this._resetValue=this.value;}this.connect(this.domNode,"onmousedown","_onMouseDown");},_setValueAttr:function(_a,_b){this.value=_a;this._handleOnChange(_a,_b);},_getValueAttr:function(){return this._lastValue;},undo:function(){this._setValueAttr(this._lastValueReported,false);},reset:function(){this._hasBeenBlurred=false;this._setValueAttr(this._resetValue,true);},_onKeyDown:function(e){if(e.keyCode==dojo.keys.ESCAPE&&!(e.ctrlKey||e.altKey||e.metaKey)){var te;if(dojo.isIE){e.preventDefault();te=document.createEventObject();te.keyCode=dojo.keys.ESCAPE;te.shiftKey=e.shiftKey;e.srcElement.fireEvent("onkeypress",te);}}},_onMouseDown:function(e){var _c=this.connect(dojo.body(),"onmouseup",function(){if(this.isFocusable()){this.focus();}this.disconnect(_c);});},_layoutHackIE7:function(){if(dojo.isIE==7){var _d=this.domNode;var _e=_d.parentNode;var _f=_d.firstChild||_d;var _10=_f.style.filter;while(_e&&_e.clientHeight==0){_e._disconnectHandle=this.connect(_e,"onscroll",dojo.hitch(this,function(e){this.disconnect(_e._disconnectHandle);_e.removeAttribute("_disconnectHandle");_f.style.filter=(new Date()).getMilliseconds();setTimeout(function(){_f.style.filter=_10;},0);}));_e=_e.parentNode;}}}});}