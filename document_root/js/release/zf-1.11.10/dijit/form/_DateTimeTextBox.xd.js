/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dijit.form._DateTimeTextBox"],["require","dojo.date"],["require","dojo.date.locale"],["require","dojo.date.stamp"],["require","dijit.form.ValidationTextBox"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dijit.form._DateTimeTextBox"]){_4._hasResource["dijit.form._DateTimeTextBox"]=true;_4.provide("dijit.form._DateTimeTextBox");_4.require("dojo.date");_4.require("dojo.date.locale");_4.require("dojo.date.stamp");_4.require("dijit.form.ValidationTextBox");_4.declare("dijit.form._DateTimeTextBox",_5.form.RangeBoundTextBox,{regExpGen:_4.date.locale.regexp,datePackage:"dojo.date",compare:_4.date.compare,format:function(_7,_8){if(!_7){return "";}return this.dateLocaleModule.format(_7,_8);},parse:function(_9,_a){return this.dateLocaleModule.parse(_9,_a)||(this._isEmpty(_9)?null:undefined);},serialize:function(_b,_c){if(_b.toGregorian){_b=_b.toGregorian();}return _4.date.stamp.toISOString(_b,_c);},value:new Date(""),_blankValue:null,popupClass:"",_selector:"",constructor:function(_d){var _e=_d.datePackage?_d.datePackage+".Date":"Date";this.dateClassObj=_4.getObject(_e,false);this.value=new this.dateClassObj("");this.datePackage=_d.datePackage||this.datePackage;this.dateLocaleModule=_4.getObject(this.datePackage+".locale",false);this.regExpGen=this.dateLocaleModule.regexp;},postMixInProperties:function(){if(!this.value||this.value.toString()==_5.form._DateTimeTextBox.prototype.value.toString()){this.value=null;}var _f=this.constraints;_f.selector=this._selector;_f.fullYear=true;var _10=_4.date.stamp.fromISOString;if(typeof _f.min=="string"){_f.min=_10(_f.min);}if(typeof _f.max=="string"){_f.max=_10(_f.max);}this.inherited(arguments);},_onFocus:function(evt){this._open();this.inherited(arguments);},_setValueAttr:function(_11,_12,_13){if(_11 instanceof Date&&!(this.dateClassObj instanceof Date)){_11=new this.dateClassObj(_11);}this.inherited(arguments);if(this._picker){if(!_11){_11=new this.dateClassObj();}this._picker.attr("value",_11);}},_open:function(){if(this.disabled||this.readOnly||!this.popupClass){return;}var _14=this;if(!this._picker){var _15=_4.getObject(this.popupClass,false);this._picker=new _15({onValueSelected:function(_16){if(_14._tabbingAway){delete _14._tabbingAway;}else{_14.focus();}setTimeout(_4.hitch(_14,"_close"),1);_5.form._DateTimeTextBox.superclass._setValueAttr.call(_14,_16,true);},id:this.id+"_popup",lang:_14.lang,constraints:_14.constraints,datePackage:_14.datePackage,isDisabledDate:function(_17){var _18=_4.date.compare;var _19=_14.constraints;return _19&&(_19.min&&(_18(_19.min,_17,_14._selector)>0)||(_19.max&&_18(_19.max,_17,_14._selector)<0));}});this._picker.attr("value",this.attr("value")||new this.dateClassObj());}if(!this._opened){_5.popup.open({parent:this,popup:this._picker,around:this.domNode,onCancel:_4.hitch(this,this._close),onClose:function(){_14._opened=false;}});this._opened=true;}_4.marginBox(this._picker.domNode,{w:this.domNode.offsetWidth});},_close:function(){if(this._opened){_5.popup.close(this._picker);this._opened=false;}},_onBlur:function(){this._close();if(this._picker){this._picker.destroy();delete this._picker;}this.inherited(arguments);},_getDisplayedValueAttr:function(){return this.textbox.value;},_setDisplayedValueAttr:function(_1a,_1b){this._setValueAttr(this.parse(_1a,this.constraints),_1b,_1a);},destroy:function(){if(this._picker){this._picker.destroy();delete this._picker;}this.inherited(arguments);},postCreate:function(){this.inherited(arguments);this.connect(this.focusNode,"onkeypress",this._onKeyPress);this.connect(this.focusNode,"onclick",this._open);},_onKeyPress:function(e){var p=this._picker,dk=_4.keys;if(p&&this._opened&&p.handleKey){if(p.handleKey(e)===false){return;}}if(this._opened&&e.charOrCode==dk.ESCAPE&&!(e.shiftKey||e.ctrlKey||e.altKey||e.metaKey)){this._close();_4.stopEvent(e);}else{if(!this._opened&&e.charOrCode==dk.DOWN_ARROW){this._open();_4.stopEvent(e);}else{if(e.charOrCode===dk.TAB){this._tabbingAway=true;}else{if(this._opened&&(e.keyChar||e.charOrCode===dk.BACKSPACE||e.charOrCode==dk.DELETE)){setTimeout(_4.hitch(this,function(){if(this._picker&&this._opened){_5.placeOnScreenAroundElement(p.domNode.parentNode,this.domNode,{"BL":"TL","TL":"BL"},p.orient?_4.hitch(p,"orient"):null);}}),1);}}}}}});}}};});