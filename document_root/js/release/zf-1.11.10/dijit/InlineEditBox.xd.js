/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dijit.InlineEditBox"],["require","dojo.i18n"],["require","dijit._Widget"],["require","dijit._Container"],["require","dijit.form.Button"],["require","dijit.form.TextBox"],["requireLocalization","dijit","common",null,"ROOT,ar,ca,cs,da,de,el,es,fi,fr,he,hu,it,ja,ko,nb,nl,pl,pt,pt-pt,ru,sk,sl,sv,th,tr,zh,zh-tw","ROOT,ar,ca,cs,da,de,el,es,fi,fr,he,hu,it,ja,ko,nb,nl,pl,pt,pt-pt,ru,sk,sl,sv,th,tr,zh,zh-tw"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dijit.InlineEditBox"]){_4._hasResource["dijit.InlineEditBox"]=true;_4.provide("dijit.InlineEditBox");_4.require("dojo.i18n");_4.require("dijit._Widget");_4.require("dijit._Container");_4.require("dijit.form.Button");_4.require("dijit.form.TextBox");_4.declare("dijit.InlineEditBox",_5._Widget,{editing:false,autoSave:true,buttonSave:"",buttonCancel:"",renderAsHtml:false,editor:"dijit.form.TextBox",editorWrapper:"dijit._InlineEditor",editorParams:{},onChange:function(_7){},onCancel:function(){},width:"100%",value:"",noValueIndicator:"<span style='font-family: wingdings; text-decoration: underline;'>&nbsp;&nbsp;&nbsp;&nbsp;&#x270d;&nbsp;&nbsp;&nbsp;&nbsp;</span>",constructor:function(){this.editorParams={};},postMixInProperties:function(){this.inherited(arguments);this.displayNode=this.srcNodeRef;var _8={ondijitclick:"_onClick",onmouseover:"_onMouseOver",onmouseout:"_onMouseOut",onfocus:"_onMouseOver",onblur:"_onMouseOut"};for(var _9 in _8){this.connect(this.displayNode,_9,_8[_9]);}_5.setWaiRole(this.displayNode,"button");if(!this.displayNode.getAttribute("tabIndex")){this.displayNode.setAttribute("tabIndex",0);}var _a=this.value;if(_a===null){_a="";}if(_a===""&&!("value" in this.params)){_a=this.displayNode.innerHTML;if(!this.renderAsHtml){_a=_a.replace(/<br\/?>/gi,"\n").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<BR>");this.displayNode.innerHTML=_a;_a=this.displayNode.innerText||this.displayNode.textContent||"";}}this.value=_4.trim(_a);if(this.value===""){this.displayNode.innerHTML=this.noValueIndicator;}_4.addClass(this.displayNode,"dijitInlineEditBoxDisplayMode");},setDisabled:function(_b){_4.deprecated("dijit.InlineEditBox.setDisabled() is deprecated.  Use attr('disabled', bool) instead.","","2.0");this.attr("disabled",_b);},_setDisabledAttr:function(_c){this.disabled=_c;_5.setWaiState(this.domNode,"disabled",_c);if(_c){this.displayNode.removeAttribute("tabIndex");}else{this.displayNode.setAttribute("tabIndex",0);}_4.toggleClass(this.displayNode,"dijitInlineEditBoxDisplayModeDisabled",_c);},_onMouseOver:function(){if(!this.disabled){_4.addClass(this.displayNode,"dijitInlineEditBoxDisplayModeHover");}},_onMouseOut:function(){_4.removeClass(this.displayNode,"dijitInlineEditBoxDisplayModeHover");},_onClick:function(e){if(this.disabled){return;}if(e){_4.stopEvent(e);}this._onMouseOut();setTimeout(_4.hitch(this,"edit"),0);},edit:function(){if(this.disabled||this.editing){return;}this.editing=true;this._savedPosition=_4.style(this.displayNode,"position")||"static";this._savedOpacity=_4.style(this.displayNode,"opacity")||"1";this._savedTabIndex=_4.attr(this.displayNode,"tabIndex")||"0";if(this.wrapperWidget){this.wrapperWidget.editWidget.attr("displayedValue" in this.editorParams?"displayedValue":"value",this.value);}else{var _d=_4.create("span",null,this.domNode,"before");var _e=_4.getObject(this.editorWrapper);this.wrapperWidget=new _e({value:this.value,buttonSave:this.buttonSave,buttonCancel:this.buttonCancel,tabIndex:this._savedTabIndex,editor:this.editor,inlineEditBox:this,sourceStyle:_4.getComputedStyle(this.displayNode),save:_4.hitch(this,"save"),cancel:_4.hitch(this,"cancel")},_d);}var ww=this.wrapperWidget;if(_4.isIE){_5.focus(_5.getFocus());}_4.style(this.displayNode,{position:"absolute",opacity:"0",display:"none"});_4.style(ww.domNode,{position:this._savedPosition,visibility:"visible",opacity:"1"});_4.attr(this.displayNode,"tabIndex","-1");setTimeout(_4.hitch(this,function(){ww.focus();ww._resetValue=ww.getValue();}),0);},_onBlur:function(){this.inherited(arguments);if(!this.editing){setTimeout(_4.hitch(this,function(){if(this.wrapperWidget){this.wrapperWidget.destroy();delete this.wrapperWidget;}}),0);}},_showText:function(_f){var ww=this.wrapperWidget;_4.style(ww.domNode,{position:"absolute",visibility:"hidden",opacity:"0"});_4.style(this.displayNode,{position:this._savedPosition,opacity:this._savedOpacity,display:""});_4.attr(this.displayNode,"tabIndex",this._savedTabIndex);if(_f){_5.focus(this.displayNode);}},save:function(_10){if(this.disabled||!this.editing){return;}this.editing=false;var ww=this.wrapperWidget;var _11=ww.getValue();this.attr("value",_11);setTimeout(_4.hitch(this,"onChange",_11),0);this._showText(_10);},setValue:function(val){_4.deprecated("dijit.InlineEditBox.setValue() is deprecated.  Use attr('value', ...) instead.","","2.0");return this.attr("value",val);},_setValueAttr:function(val){this.value=val=_4.trim(val);if(!this.renderAsHtml){val=val.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;").replace(/\n/g,"<br>");}this.displayNode.innerHTML=val||this.noValueIndicator;},getValue:function(){_4.deprecated("dijit.InlineEditBox.getValue() is deprecated.  Use attr('value') instead.","","2.0");return this.attr("value");},cancel:function(_12){if(this.disabled||!this.editing){return;}this.editing=false;setTimeout(_4.hitch(this,"onCancel"),0);this._showText(_12);}});_4.declare("dijit._InlineEditor",[_5._Widget,_5._Templated],{templateString:_4.cache("dijit","templates/InlineEditBox.html","<span dojoAttachPoint=\"editNode\" waiRole=\"presentation\" style=\"position: absolute; visibility:hidden\" class=\"dijitReset dijitInline\"\n\tdojoAttachEvent=\"onkeypress: _onKeyPress\"\n\t><span dojoAttachPoint=\"editorPlaceholder\"></span\n\t><span dojoAttachPoint=\"buttonContainer\"\n\t\t><button class='saveButton' dojoAttachPoint=\"saveButton\" dojoType=\"dijit.form.Button\" dojoAttachEvent=\"onClick:save\" label=\"${buttonSave}\"></button\n\t\t><button class='cancelButton' dojoAttachPoint=\"cancelButton\" dojoType=\"dijit.form.Button\" dojoAttachEvent=\"onClick:cancel\" label=\"${buttonCancel}\"></button\n\t></span\n></span>\n"),widgetsInTemplate:true,postMixInProperties:function(){this.inherited(arguments);this.messages=_4.i18n.getLocalization("dijit","common",this.lang);_4.forEach(["buttonSave","buttonCancel"],function(_13){if(!this[_13]){this[_13]=this.messages[_13];}},this);},postCreate:function(){var cls=_4.getObject(this.editor);var _14=this.sourceStyle;var _15="line-height:"+_14.lineHeight+";";_4.forEach(["Weight","Family","Size","Style"],function(_16){_15+="font-"+_16+":"+_14["font"+_16]+";";},this);_4.forEach(["marginTop","marginBottom","marginLeft","marginRight"],function(_17){this.domNode.style[_17]=_14[_17];},this);var _18=this.inlineEditBox.width;if(_18=="100%"){_15+="width:100%;";this.domNode.style.display="block";}else{_15+="width:"+(_18+(Number(_18)==_18?"px":""))+";";}var _19=this.inlineEditBox.editorParams;_19.style=_15;_19["displayedValue" in cls.prototype?"displayedValue":"value"]=this.value;var ew=(this.editWidget=new cls(_19,this.editorPlaceholder));if(this.inlineEditBox.autoSave){this.buttonContainer.style.display="none";this.connect(ew,"onChange","_onChange");this.connect(ew,"onKeyPress","_onKeyPress");}else{if("intermediateChanges" in cls.prototype){ew.attr("intermediateChanges",true);this.connect(ew,"onChange","_onIntermediateChange");this.saveButton.attr("disabled",true);}}},_onIntermediateChange:function(val){this.saveButton.attr("disabled",(this.getValue()==this._resetValue)||!this.enableSave());},destroy:function(){this.editWidget.destroy(true);this.inherited(arguments);},getValue:function(){var ew=this.editWidget;return String(ew.attr("displayedValue" in ew?"displayedValue":"value"));},_onKeyPress:function(e){if(this.inlineEditBox.autoSave&&this.inlineEditBox.editing){if(e.altKey||e.ctrlKey){return;}if(e.charOrCode==_4.keys.ESCAPE){_4.stopEvent(e);this.cancel(true);}else{if(e.charOrCode==_4.keys.ENTER&&e.target.tagName=="INPUT"){_4.stopEvent(e);this._onChange();}}}},_onBlur:function(){this.inherited(arguments);if(this.inlineEditBox.autoSave&&this.inlineEditBox.editing){if(this.getValue()==this._resetValue){this.cancel(false);}else{if(this.enableSave()){this.save(false);}}}},_onChange:function(){if(this.inlineEditBox.autoSave&&this.inlineEditBox.editing&&this.enableSave()){_4.style(this.inlineEditBox.displayNode,{display:""});_5.focus(this.inlineEditBox.displayNode);}},enableSave:function(){return (this.editWidget.isValid?this.editWidget.isValid():true);},focus:function(){this.editWidget.focus();setTimeout(_4.hitch(this,function(){if(this.editWidget.focusNode&&this.editWidget.focusNode.tagName=="INPUT"){_5.selectInputText(this.editWidget.focusNode);}}),0);}});}}};});