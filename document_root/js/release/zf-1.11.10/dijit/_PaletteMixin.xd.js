/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dijit._PaletteMixin"],["require","dijit._CssStateMixin"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dijit._PaletteMixin"]){_4._hasResource["dijit._PaletteMixin"]=true;_4.provide("dijit._PaletteMixin");_4.require("dijit._CssStateMixin");_4.declare("dijit._PaletteMixin",[_5._CssStateMixin],{defaultTimeout:500,timeoutChangeRate:0.9,value:null,tabIndex:"0",cellClass:"dijitPaletteCell",dyeClass:"",_preparePalette:function(_7,_8){this._cells=[];var _9=this._blankGif;var _a=_4.getObject(this.dyeClass);for(var _b=0;_b<_7.length;_b++){var _c=_4.create("tr",{tabIndex:"-1"},this.gridNode);for(var _d=0;_d<_7[_b].length;_d++){var _e=_7[_b][_d];if(_e){var _f=new _a(_e);var _10=_4.create("td",{"class":this.cellClass,tabIndex:"-1",title:_8[_e]});_f.fillCell(_10,_9);this.connect(_10,"ondijitclick","_onCellClick");this._trackMouseState(_10,this.cellClass);_4.place(_10,_c);_10.index=this._cells.length;this._cells.push({node:_10,dye:_f});}}}this._xDim=_7[0].length;this._yDim=_7.length;var _11={UP_ARROW:-this._xDim,DOWN_ARROW:this._xDim,RIGHT_ARROW:1,LEFT_ARROW:-1};for(var key in _11){this._connects.push(_5.typematic.addKeyListener(this.domNode,{charOrCode:_4.keys[key],ctrlKey:false,altKey:false,shiftKey:false},this,function(){var _12=_11[key];return function(_13){this._navigateByKey(_12,_13);};}(),this.timeoutChangeRate,this.defaultTimeout));}},postCreate:function(){this.inherited(arguments);this._currentFocus=this._cells[0].node;_4.attr(this._currentFocus,"tabIndex",this.tabIndex);},focus:function(){_5.focus(this._currentFocus);},_onBlur:function(){_4.attr(this._currentFocus,"tabIndex","-1");this._currentFocus=this._cells[0].node;_4.attr(this._currentFocus,"tabIndex",this.tabIndex);this.inherited(arguments);},_onCellClick:function(evt){var _14=evt.currentTarget;this._selectCell(_14);_4.stopEvent(evt);},_setCurrent:function(_15){if("_currentFocus" in this){_4.attr(this._currentFocus,"tabIndex","-1");}this._currentFocus=_15;if(_15){_4.attr(_15,"tabIndex",this.tabIndex);}},_selectCell:function(_16){var dye=this._getDye(_16);this.onChange(this.value=dye.getValue());},onChange:function(_17){},_navigateByKey:function(_18,_19){if(_19==-1){return;}var _1a=this._currentFocus.index+_18;if(_1a<this._cells.length&&_1a>-1){var _1b=this._cells[_1a].node;this._setCurrent(_1b);setTimeout(_4.hitch(_5,"focus",_1b),0);}},_getDye:function(_1c){return this._cells[_1c.index].dye;}});}}};});