/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojo.hash"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojo.hash"]){_4._hasResource["dojo.hash"]=true;_4.provide("dojo.hash");(function(){_4.hash=function(_7,_8){if(!arguments.length){return _9();}if(_7.charAt(0)=="#"){_7=_7.substring(1);}if(_8){_a(_7);}else{location.href="#"+_7;}return _7;};var _b=null,_c=null,_d=_4.config.hashPollFrequency||100;function _9(){var h=location.href,i=h.indexOf("#");return (i>=0)?h.substring(i+1):"";};function _e(){_4.publish("/dojo/hashchange",[_9()]);};function _f(){if(_9()===_b){return;}_b=_9();_e();};function _a(_10){if(_c){if(_c.isTransitioning()){setTimeout(_4.hitch(null,_a,_10),_d);return;}var _11=_c.iframe.location.href;var _12=_11.indexOf("?");_c.iframe.location.replace(_11.substring(0,_12)+"?"+_10);return;}location.replace("#"+_10);_f();};function _13(){var ifr=document.createElement("iframe"),_14="dojo-hash-iframe",_15=_4.config.dojoBlankHtmlUrl||_4.moduleUrl("dojo","resources/blank.html");ifr.id=_14;ifr.src=_15+"?"+_9();ifr.style.display="none";document.body.appendChild(ifr);this.iframe=_4.global[_14];var _16,_17,_18,_19,_1a,_1b=this.iframe.location,_1c=_4.global.location;function _1d(){_b=_1c.hash;_16=_1a?_b:_1b.search;_17=false;_18=null;};this.isTransitioning=function(){return _17;};this.pollLocation=function(){if(!_1a){try{_1b.search;if(document.title!=_19){_19=this.iframe.document.title=document.title;}}catch(e){_1a=true;console.error("dojo.hash: Error adding history entry. Server unreachable.");}}if(_17&&_b===_1c.hash){if(_1a||_1b.search===_18){_1d();_e();}else{setTimeout(_4.hitch(this,this.pollLocation),0);return;}}else{if(_b===_1c.hash&&(_1a||_16===_1b.search)){}else{if(_b!==_1c.hash){_b=_1c.hash;_17=true;_18="?"+_9();ifr.src=_15+_18;_1a=false;setTimeout(_4.hitch(this,this.pollLocation),0);return;}else{if(!_1a){_1c.href="#"+_1b.search.substring(1);_1d();_e();}}}}setTimeout(_4.hitch(this,this.pollLocation),_d);};_1d();setTimeout(_4.hitch(this,this.pollLocation),_d);};_4.addOnLoad(function(){if("onhashchange" in _4.global&&(!_4.isIE||(_4.isIE>=8&&document.compatMode!="BackCompat"))){_4.connect(_4.global,"onhashchange",_e);}else{if(document.addEventListener){_b=_9();setInterval(_f,_d);}else{if(document.attachEvent){_c=new _13();}}}});})();}}};});