/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.drawing.tools.custom.Vector"],["require","dojox.drawing.tools.Arrow"],["require","dojox.drawing.util.positioning"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.drawing.tools.custom.Vector"]){_4._hasResource["dojox.drawing.tools.custom.Vector"]=true;_4.provide("dojox.drawing.tools.custom.Vector");_4.require("dojox.drawing.tools.Arrow");_4.require("dojox.drawing.util.positioning");_6.drawing.tools.custom.Vector=_6.drawing.util.oo.declare(_6.drawing.tools.Arrow,function(_7){this.minimumSize=this.style.arrows.length;},{draws:true,type:"dojox.drawing.tools.custom.Vector",minimumSize:30,showAngle:true,labelPosition:function(){var d=this.data;var pt=_6.drawing.util.positioning.label({x:d.x1,y:d.y1},{x:d.x2,y:d.y2});return {x:pt.x,y:pt.y};},_createZeroVector:function(_8,d,_9){var s=_8=="hit"?this.minimumSize:this.minimumSize/6;var f=_8=="hit"?_9.fill:null;d={cx:this.data.x1,cy:this.data.y1,rx:s,ry:s};this.remove(this[_8]);this[_8]=this.container.createEllipse(d).setStroke(_9).setFill(f);this.util.attr(this[_8],"drawingType","stencil");},render:function(){this.onBeforeRender(this);if(this.getRadius()>=this.minimumSize){this._create("hit",this.data,this.style.currentHit);this._create("shape",this.data,this.style.current);}else{this._createZeroVector("hit",this.data,this.style.currentHit);this._createZeroVector("shape",this.data,this.style.current);}},onUp:function(_a){if(this.created||!this._downOnCanvas){return;}this._downOnCanvas=false;if(!this.shape){s=_a.start;_a.y=_a.start.y+100;_a.x=_a.start.x;this.setPoints([{x:s.x,y:s.y},{x:s.x,y:s.y+100}]);this.render();}if(this.getRadius()<this.minimumSize){var p=this.points;this.setPoints([{x:p[0].x,y:p[0].y},{x:p[0].x,y:p[0].y}]);}else{var pt=this.util.snapAngle(_a,this.angleSnap/180);var p=this.points;this.setPoints([{x:p[0].x,y:p[0].y},{x:pt.x,y:pt.y}]);}this.renderedOnce=true;this.onRender(this);}});_6.drawing.tools.custom.Vector.setup={name:"dojox.drawing.tools.custom.Vector",tooltip:"Vector Tool",iconClass:"iconVector"};_6.drawing.register(_6.drawing.tools.custom.Vector.setup,"tool");}}};});