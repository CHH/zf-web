/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.grid.enhanced.dnd._DndFocusManager"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.grid.enhanced.dnd._DndFocusManager"]){_4._hasResource["dojox.grid.enhanced.dnd._DndFocusManager"]=true;_4.provide("dojox.grid.enhanced.dnd._DndFocusManager");_4.declare("dojox.grid.enhanced.dnd._DndFocusManager",null,{_rowBarNode:null,_rowBarFocusIdy:null,isRowBar:function(){return (!!this._rowBarNode);},getRowBarNode:function(_7){return this.grid.views.views[0].getCellNode(_7,0);},focusRowBar:function(){this.focusRowBarNode(0);this._focusifyCellNode(false);},focusRowBarNode:function(_8){this._blurRowBar();this._focusifyCellNode(false);var _9=this.getRowBarNode(_8);if(!_9){return;}this._rowBarNode=_9;this._rowBarFocusIdy=_8;this._rowBarNode.tabIndex=-1;_6.grid.util.fire(this._rowBarNode,"focus");_4.toggleClass(this._rowBarNode,this.focusClass,true);},_blurRowBar:function(){if(this._rowBarNode){_4.toggleClass(this._rowBarNode,this.focusClass,false);this._rowBarNode=this._rowBarFocusIdy=null;}},focusNextRowBar:function(){var sc=this.grid.scroller,r=this._rowBarFocusIdy,rc=this.grid.rowCount-1,_a=Math.min(rc,Math.max(0,r+1));var _b=this._rowBarFocusIdy+1;if(_a>sc.getLastPageRow(sc.page)){this.grid.setScrollTop(this.grid.scrollTop+sc.findScrollTop(_a)-sc.findScrollTop(r));}this.focusRowBarNode(_b);this.scrollRowBarIntoView();},focusPrevRowBar:function(){var sc=this.grid.scroller,r=this._rowBarFocusIdy,rc=this.grid.rowCount-1,_c=Math.min(rc,Math.max(0,r-1));var _d=this._rowBarFocusIdy-1;if(_d<0){return;}if(_d<=sc.getPageRow(sc.page)){this.grid.setScrollTop(this.grid.scrollTop-sc.findScrollTop(r)-sc.findScrollTop(_c));}this.focusRowBarNode(_d);this.scrollRowBarIntoView();},getFocusedRowIndex:function(){return this._rowBarFocusIdy;},scrollRowBarIntoView:function(){this.cell=this._rowBarNode;this.cell.view=this.grid.views.views[0];this.cell.getNode=function(_e){return this.cell;};this.rowIndex=this._rowBarFocusIdy;this.scrollIntoView();this.cell=null;},focusHeaderNode:function(_f){this._colHeadFocusIdx=_f;this.focusHeader.apply(this,arguments);}});}}};});