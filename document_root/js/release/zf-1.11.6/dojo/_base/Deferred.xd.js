/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojo._base.Deferred"],["require","dojo._base.lang"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojo._base.Deferred"]){_4._hasResource["dojo._base.Deferred"]=true;_4.provide("dojo._base.Deferred");_4.require("dojo._base.lang");_4.Deferred=function(_7){this.chain=[];this.id=this._nextId();this.fired=-1;this.paused=0;this.results=[null,null];this.canceller=_7;this.silentlyCancelled=false;this.isFiring=false;};_4.extend(_4.Deferred,{_nextId:(function(){var n=1;return function(){return n++;};})(),cancel:function(){var _8;if(this.fired==-1){if(this.canceller){_8=this.canceller(this);}else{this.silentlyCancelled=true;}if(this.fired==-1){if(!(_8 instanceof Error)){var _9=_8;var _a="Deferred Cancelled";if(_8&&_8.toString){_a+=": "+_8.toString();}_8=new Error(_a);_8.dojoType="cancel";_8.cancelResult=_9;}this.errback(_8);}}else{if((this.fired==0)&&(this.results[0] instanceof _4.Deferred)){this.results[0].cancel();}}},_resback:function(_b){this.fired=((_b instanceof Error)?1:0);this.results[this.fired]=_b;this._fire();},_check:function(){if(this.fired!=-1){if(!this.silentlyCancelled){throw new Error("already called!");}this.silentlyCancelled=false;return;}},callback:function(_c){this._check();this._resback(_c);},errback:function(_d){this._check();if(!(_d instanceof Error)){_d=new Error(_d);}this._resback(_d);},addBoth:function(cb,_e){var _f=_4.hitch.apply(_4,arguments);return this.addCallbacks(_f,_f);},addCallback:function(cb,_10){return this.addCallbacks(_4.hitch.apply(_4,arguments));},addErrback:function(cb,_11){return this.addCallbacks(null,_4.hitch.apply(_4,arguments));},addCallbacks:function(cb,eb){this.chain.push([cb,eb]);if(this.fired>=0&&!this.isFiring){this._fire();}return this;},_fire:function(){this.isFiring=true;var _12=this.chain;var _13=this.fired;var res=this.results[_13];var _14=this;var cb=null;while((_12.length>0)&&(this.paused==0)){var f=_12.shift()[_13];if(!f){continue;}var _15=function(){var ret=f(res);if(typeof ret!="undefined"){res=ret;}_13=((res instanceof Error)?1:0);if(res instanceof _4.Deferred){cb=function(res){_14._resback(res);_14.paused--;if((_14.paused==0)&&(_14.fired>=0)){_14._fire();}};this.paused++;}};if(_4.config.debugAtAllCosts){_15.call(this);}else{try{_15.call(this);}catch(err){_13=1;res=err;}}}this.fired=_13;this.results[_13]=res;this.isFiring=false;if((cb)&&(this.paused)){res.addBoth(cb);}}});}}};});