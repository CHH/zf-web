/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.form.FileUploader"],["require","dojox.embed.Flash"],["require","dojo.io.iframe"],["require","dojox.html.styles"],["require","dijit._Widget"],["require","dijit._Templated"],["require","dojox.embed.flashVars"],["require","dijit._Contained"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.form.FileUploader"]){_4._hasResource["dojox.form.FileUploader"]=true;_4.provide("dojox.form.FileUploader");_4.require("dojox.embed.Flash");_4.require("dojo.io.iframe");_4.require("dojox.html.styles");_4.require("dijit._Widget");_4.require("dijit._Templated");_4.require("dojox.embed.flashVars");_4.require("dijit._Contained");_4.experimental("dojox.form.FileUploader");(function(){var _7=_4.config.uploaderPath||_4.moduleUrl("dojox.form","resources/uploader.swf");var _8=function(_9){if(!_9||_9=="none"){return false;}return _9.replace(/:/g,"||").replace(/\./g,"^^").replace("url(","").replace(")","").replace(/'/g,"").replace(/"/g,"");};var _a=function(_b){var tn=_b.tagName.toLowerCase();return tn=="button"||tn=="input";};var _c=function(_d){var o={};o.ff=_4.style(_d,"fontFamily");if(o.ff){o.ff=o.ff.replace(", ",",");o.ff=o.ff.replace(/\"|\'/g,"");o.ff=o.ff=="sans-serif"?"Arial":o.ff;o.fw=_4.style(_d,"fontWeight");o.fi=_4.style(_d,"fontStyle");o.fs=parseInt(_4.style(_d,"fontSize"),10);if(_4.style(_d,"fontSize").indexOf("%")>-1){var n=_d;while(n.tagName){console.log(" P FONT:",_4.style(_d,"fontSize"));if(_4.style(n,"fontSize").indexOf("%")==-1){o.fs=parseInt(_4.style(n,"fontSize"),10);break;}if(n.tagName.toLowerCase()=="body"){o.fs=16*0.01*parseInt(_4.style(n,"fontSize"),10);}n=n.parentNode;}}o.fc=new _4.Color(_4.style(_d,"color")).toHex();o.fc=parseInt(o.fc.substring(1,Infinity),16);}o.lh=_4.style(_d,"lineHeight");o.ta=_4.style(_d,"textAlign");o.ta=o.ta=="start"||!o.ta?"left":o.ta;o.va=_a(_d)?"middle":o.lh==o.h?"middle":_4.style(_d,"verticalAlign");return o;};var _e=function(_f){var cn=_4.trim(_f.innerHTML);if(cn.indexOf("<")>-1){cn=escape(cn);}return cn;};var _10=function(_11){var o={};var dim=_4.contentBox(_11);var pad=_4._getPadExtents(_11);o.p=[pad.t,pad.w-pad.l,pad.h-pad.t,pad.l];o.w=dim.w+pad.w;o.h=dim.h+pad.h;o.d=_4.style(_11,"display");var clr=new _4.Color(_4.style(_11,"backgroundColor"));o.bc=clr.a==0?"#ffffff":clr.toHex();o.bc=parseInt(o.bc.substring(1,Infinity),16);var url=_8(_4.style(_11,"backgroundImage"));if(url){o.bi={url:url,rp:_4.style(_11,"backgroundRepeat"),pos:escape(_4.style(_11,"backgroundPosition"))};if(!o.bi.pos){var rx=_4.style(_11,"backgroundPositionX");var ry=_4.style(_11,"backgroundPositionY");rx=(rx=="left")?"0%":(rx=="right")?"100%":rx;ry=(ry=="top")?"0%":(ry=="bottom")?"100%":ry;o.bi.pos=escape(rx+" "+ry);}}return _4.mixin(o,_c(_11));};var _12=function(_13,_14,_15){var _16,_17;if(_15){_16=_4.place("<"+_13.tagName+"><span>"+_13.innerHTML+"</span></"+_13.tagName+">",_13.parentNode);var _18=_16.firstChild;_4.addClass(_18,_13.className);_4.addClass(_16,_14);_17=_10(_18);}else{_16=_4.place("<"+_13.tagName+">"+_13.innerHTML+"</"+_13.tagName+">",_13.parentNode);_4.addClass(_16,_13.className);_4.addClass(_16,_14);_16.id=_13.id;_17=_10(_16);}_4.destroy(_16);return _17;};var _19=function(ltr){return ltr.charCodeAt(0)<91;};_4.declare("dojox.form.FileUploader",[_5._Widget,_5._Templated,_5._Contained],{templateString:"<div><div dojoAttachPoint=\"progNode\"><div dojoAttachPoint=\"progTextNode\"></div></div><div dojoAttachPoint=\"insideNode\" class=\"uploaderInsideNode\"></div></div>",uploadUrl:"",isDebug:false,devMode:false,baseClass:"dojoxUploaderNorm",hoverClass:"dojoxUploaderHover",activeClass:"dojoxUploaderActive",disabledClass:"dojoxUploaderDisabled",force:"",uploaderType:"",flashObject:null,flashMovie:null,flashDiv:null,insideNode:null,deferredUploading:1,fileListId:"",uploadOnChange:false,selectMultipleFiles:true,htmlFieldName:"uploadedfile",flashFieldName:"flashUploadFiles",fileMask:null,minFlashVersion:9,tabIndex:-1,showProgress:false,progressMessage:"Loading",progressBackgroundUrl:_4.moduleUrl("dijit","themes/tundra/images/buttonActive.png"),progressBackgroundColor:"#ededed",progressWidgetId:"",skipServerCheck:false,serverTimeout:5000,log:function(){if(this.isDebug){console.log.apply(console,arguments);}},constructor:function(){this._subs=[];},postMixInProperties:function(){this.fileList=[];this._cons=[];this.fileMask=[];this.fileInputs=[];this.fileCount=0;this.flashReady=false;this._disabled=false;this.force=this.force.toLowerCase();this.uploaderType=((_6.embed.Flash.available>=this.minFlashVersion||this.force=="flash")&&this.force!="html")?"flash":"html";this.deferredUploading=this.deferredUploading===true?1:this.deferredUploading;if(!this.swfPath){this.swfPath=_7;}this._refNode=this.srcNodeRef;this.getButtonStyle();},startup:function(){},postCreate:function(){this.inherited(arguments);this.setButtonStyle();var _1a;if(this.uploaderType=="flash"){_1a="createFlashUploader";}else{this.uploaderType="html";_1a="createHtmlUploader";}if(this._hiddenNode){var w=_5.byNode(this._hiddenNode);this.connect(w,"onShow",_1a);}else{this[_1a]();}if(this.fileListId){this.connect(_4.byId(this.fileListId),"click",function(evt){var p=evt.target.parentNode.parentNode.parentNode;if(p.id&&p.id.indexOf("file_")>-1){this.removeFile(p.id.split("file_")[1]);}});}_4.addOnUnload(this,this.destroy);},getButtonStyle:function(){var _1b=this.srcNodeRef;var p=_1b.parentNode;while(p.tagName.toLowerCase()!="body"){var d=_4.style(p,"display");if(d=="none"){this._hiddenNode=p;break;}p=p.parentNode;}if(this._hiddenNode){_4.style(this._hiddenNode,"display","block");}if(this.button){console.warn("DEPRECATED: FileUploader.button - will be removed in 1.5. FileUploader should be created as widget.");}if(!_1b&&this.button&&this.button.domNode){var _1c=true;var cls=this.button.domNode.className+" dijitButtonNode";var txt=_e(_4.query(".dijitButtonText",this.button.domNode)[0]);var _1d="<button id=\""+this.button.id+"\" class=\""+cls+"\">"+txt+"</button>";_1b=_4.place(_1d,this.button.domNode,"after");this.srcNodeRef=_1b;this.button.destroy();this.baseClass="dijitButton";this.hoverClass="dijitButtonHover";this.pressClass="dijitButtonActive";this.disabledClass="dijitButtonDisabled";}else{if(!this.srcNodeRef&&this.button){_1b=this.button;}}if(_4.attr(_1b,"class")){this.baseClass+=" "+_4.attr(_1b,"class");}_4.attr(_1b,"class",this.baseClass);this.norm=_10(_1b);this.width=this.norm.w;this.height=this.norm.h;if(this.uploaderType=="flash"){this.over=_12(_1b,this.baseClass+" "+this.hoverClass,_1c);this.down=_12(_1b,this.baseClass+" "+this.activeClass,_1c);this.dsbl=_12(_1b,this.baseClass+" "+this.disabledClass,_1c);this.fhtml={cn:_e(_1b),nr:this.norm,ov:this.over,dn:this.down,ds:this.dsbl};}else{this.fhtml={cn:_e(_1b),nr:this.norm};if(this.norm.va=="middle"){this.norm.lh=this.norm.h;}}if(this.devMode){this.log("classes - base:",this.baseClass," hover:",this.hoverClass,"active:",this.activeClass);this.log("fhtml:",this.fhtml);this.log("norm:",this.norm);this.log("over:",this.over);this.log("down:",this.down);}},setButtonStyle:function(){_4.style(this.domNode,{width:this.fhtml.nr.w+"px",height:(this.fhtml.nr.h)+"px",padding:"0px",lineHeight:"normal",position:"relative"});if(this.uploaderType=="html"&&this.norm.va=="middle"){_4.style(this.domNode,"lineHeight",this.norm.lh+"px");}if(this.showProgress){this.progTextNode.innerHTML=this.progressMessage;_4.style(this.progTextNode,{width:this.fhtml.nr.w+"px",height:(this.fhtml.nr.h+0)+"px",padding:"0px",margin:"0px",left:"0px",lineHeight:(this.fhtml.nr.h+0)+"px",position:"absolute"});_4.style(this.progNode,{width:this.fhtml.nr.w+"px",height:(this.fhtml.nr.h+0)+"px",padding:"0px",margin:"0px",left:"0px",position:"absolute",display:"none",backgroundImage:"url("+this.progressBackgroundUrl+")",backgroundPosition:"bottom",backgroundRepeat:"repeat-x",backgroundColor:this.progressBackgroundColor});}else{_4.destroy(this.progNode);}_4.style(this.insideNode,{position:"absolute",top:"0px",left:"0px",display:""});_4.addClass(this.domNode,this.srcNodeRef.className);if(this.fhtml.nr.d.indexOf("inline")>-1){_4.addClass(this.domNode,"dijitInline");}try{this.insideNode.innerHTML=this.fhtml.cn;}catch(e){if(this.uploaderType=="flash"){this.insideNode=this.insideNode.parentNode.removeChild(this.insideNode);_4.body().appendChild(this.insideNode);this.insideNode.innerHTML=this.fhtml.cn;var c=_4.connect(this,"onReady",this,function(){_4.disconnect(c);this.insideNode=this.insideNode.parentNode.removeChild(this.insideNode);this.domNode.appendChild(this.insideNode);});}else{this.insideNode.appendChild(document.createTextNode(this.fhtml.cn));}}this.flashDiv=this.insideNode;if(this._hiddenNode){_4.style(this._hiddenNode,"display","none");}},onChange:function(_1e){},onProgress:function(_1f){},onComplete:function(_20){},onCancel:function(){},onError:function(_21){},onReady:function(_22){},onLoad:function(_23){},submit:function(_24){var _25=_24?_4.formToObject(_24):null;this.upload(_25);return false;},upload:function(_26){if(!this.fileList.length){return false;}if(!this.uploadUrl){console.warn("uploadUrl not provided. Aborting.");return false;}if(!this.showProgress){this.attr("disabled",true);}if(this.progressWidgetId){var _27=_5.byId(this.progressWidgetId).domNode;if(_4.style(_27,"display")=="none"){this.restoreProgDisplay="none";_4.style(_27,"display","block");}if(_4.style(_27,"visibility")=="hidden"){this.restoreProgDisplay="hidden";_4.style(_27,"visibility","visible");}}if(_26&&!_26.target){this.postData=_26;}this.log("upload type:",this.uploaderType," - postData:",this.postData);for(var i=0;i<this.fileList.length;i++){var f=this.fileList[i];f.bytesLoaded=0;f.bytesTotal=f.size||100000;f.percent=0;}if(this.uploaderType=="flash"){this.uploadFlash();}else{this.uploadHTML();}return false;},removeFile:function(_28,_29){var i;for(i=0;i<this.fileList.length;i++){if(this.fileList[i].name==_28){if(!_29){this.fileList.splice(i,1);}break;}}if(this.uploaderType=="flash"){this.flashMovie.removeFile(_28);}else{if(!_29){_4.destroy(this.fileInputs[i]);this.fileInputs.splice(i,1);this._renumberInputs();}}if(this.fileListId){_4.destroy("file_"+_28);}},destroyAll:function(){console.warn("DEPRECATED for 1.5 - use destroy() instead");this.destroy();},destroy:function(){if(this.uploaderType=="flash"&&!this.flashMovie){this._cons.push(_4.connect(this,"onLoad",this,"destroy"));return;}_4.forEach(this._subs,_4.unsubscribe,_4);_4.forEach(this._cons,_4.disconnect,_4);if(this.scrollConnect){_4.disconnect(this.scrollConnect);}if(this.uploaderType=="flash"){this.flashObject.destroy();_4.destroy(this.flashDiv);}else{_4.destroy("dojoIoIframe");_4.destroy(this._fileInput);_4.destroy(this._formNode);}this.inherited(arguments);},hide:function(){console.warn("DEPRECATED for 1.5 - use dojo.style(domNode, 'display', 'none' instead");_4.style(this.domNode,"display","none");},show:function(){console.warn("DEPRECATED for 1.5 - use dojo.style(domNode, 'display', '') instead");_4.style(this.domNode,"display","");},disable:function(_2a){console.warn("DEPRECATED: FileUploader.disable() - will be removed in 1.5. Use attr('disable', true) instead.");this.attr("disable",_2a);},_displayProgress:function(_2b){if(_2b===true){if(this.uploaderType=="flash"){_4.style(this.insideNode,"left","-2500px");}else{_4.style(this.insideNode,"display","none");}_4.style(this.progNode,"display","");}else{if(_2b===false){_4.style(this.insideNode,{display:"",left:"0px"});_4.style(this.progNode,"display","none");}else{var w=_2b*this.fhtml.nr.w;_4.style(this.progNode,"width",w+"px");}}},_animateProgress:function(){this._displayProgress(true);var _2c=false;var c=_4.connect(this,"_complete",function(){_4.disconnect(c);_2c=true;});var w=0;var _2d=setInterval(_4.hitch(this,function(){w+=5;if(w>this.fhtml.nr.w){w=0;_2c=true;}this._displayProgress(w/this.fhtml.nr.w);if(_2c){clearInterval(_2d);setTimeout(_4.hitch(this,function(){this._displayProgress(false);}),500);}}),50);},_error:function(evt){if(typeof (evt)=="string"){evt=new Error(evt);}this.onError(evt);},_addToFileList:function(){if(this.fileListId){var str="";_4.forEach(this.fileList,function(d){str+="<table id=\"file_"+d.name+"\" class=\"fileToUpload\"><tr><td class=\"fileToUploadClose\"></td><td class=\"fileToUploadName\">"+d.name+"</td><td class=\"fileToUploadSize\">"+Math.ceil(d.size*0.001)+"kb</td></tr></table>";},this);_4.byId(this.fileListId).innerHTML=str;}},_change:function(_2e){if(_4.isIE){_4.forEach(_2e,function(f){f.name=f.name.split("\\")[f.name.split("\\").length-1];});}if(this.selectMultipleFiles){this.fileList=this.fileList.concat(_2e);}else{if(this.fileList[0]){this.removeFile(this.fileList[0].name,true);}this.fileList=_2e;}this._addToFileList();this.onChange(_2e);if(this.uploadOnChange){this._buildFileInput();this.upload();}else{if(this.uploaderType=="html"&&this.selectMultipleFiles){this._buildFileInput();this._connectInput();}}},_complete:function(_2f){_2f=_4.isArray(_2f)?_2f:[_2f];_4.forEach(_2f,function(f){if(f.ERROR){this._error(f.ERROR);}},this);_4.forEach(this.fileList,function(f){f.bytesLoaded=1;f.bytesTotal=1;f.percent=100;this._progress(f);},this);_4.forEach(this.fileList,function(f){this.removeFile(f.name,true);},this);this.onComplete(_2f);this.fileList=[];this._resetHTML();this.attr("disabled",false);if(this.restoreProgDisplay){setTimeout(_4.hitch(this,function(){_4.style(_5.byId(this.progressWidgetId).domNode,this.restoreProgDisplay=="none"?"display":"visibility",this.restoreProgDisplay);}),500);}},_progress:function(_30){var _31=0;var _32=0;for(var i=0;i<this.fileList.length;i++){var f=this.fileList[i];if(f.name==_30.name){f.bytesLoaded=_30.bytesLoaded;f.bytesTotal=_30.bytesTotal;f.percent=Math.ceil(f.bytesLoaded/f.bytesTotal*100);this.log(f.name,"percent:",f.percent);}_32+=Math.ceil(0.001*f.bytesLoaded);_31+=Math.ceil(0.001*f.bytesTotal);}var _33=Math.ceil(_32/_31*100);if(this.progressWidgetId){_5.byId(this.progressWidgetId).update({progress:_33+"%"});}if(this.showProgress){this._displayProgress(_33*0.01);}this.onProgress(this.fileList);},_getDisabledAttr:function(){return this._disabled;},_setDisabledAttr:function(_34){if(this._disabled==_34){return;}if(this.uploaderType=="flash"){if(!this.flashReady){var _35=_4.connect(this,"onLoad",this,function(){_4.disconnect(_35);this._setDisabledAttr(_34);});return;}this._disabled=_34;this.flashMovie.doDisable(_34);}else{this._disabled=_34;_4.style(this._fileInput,"display",this._disabled?"none":"");}_4.toggleClass(this.domNode,this.disabledClass,_34);},_onFlashBlur:function(){this.flashMovie.blur();if(!this.nextFocusObject&&this.tabIndex){var _36=_4.query("[tabIndex]");for(var i=0;i<_36.length;i++){if(_36[i].tabIndex>=Number(this.tabIndex)+1){this.nextFocusObject=_36[i];break;}}}this.nextFocusObject.focus();},_disconnect:function(){_4.forEach(this._cons,_4.disconnect,_4);},uploadHTML:function(){if(this.selectMultipleFiles){_4.destroy(this._fileInput);}this._setHtmlPostData();if(this.showProgress){this._animateProgress();}var dfd=_4.io.iframe.send({url:this.uploadUrl,form:this._formNode,handleAs:"json",error:_4.hitch(this,function(err){this._error("HTML Upload Error:"+err.message);}),load:_4.hitch(this,function(_37,_38,_39){this._complete(_37);})});},createHtmlUploader:function(){this._buildForm();this._setFormStyle();this._buildFileInput();this._connectInput();this._styleContent();_4.style(this.insideNode,"visibility","visible");this.onReady();},_connectInput:function(){this._disconnect();this._cons.push(_4.connect(this._fileInput,"mouseover",this,function(evt){_4.addClass(this.domNode,this.hoverClass);this.onMouseOver(evt);}));this._cons.push(_4.connect(this._fileInput,"mouseout",this,function(evt){_4.removeClass(this.domNode,this.activeClass);_4.removeClass(this.domNode,this.hoverClass);this.onMouseOut(evt);this._checkHtmlCancel("off");}));this._cons.push(_4.connect(this._fileInput,"mousedown",this,function(evt){_4.addClass(this.domNode,this.activeClass);_4.removeClass(this.domNode,this.hoverClass);this.onMouseDown(evt);}));this._cons.push(_4.connect(this._fileInput,"mouseup",this,function(evt){_4.removeClass(this.domNode,this.activeClass);this.onMouseUp(evt);this.onClick(evt);this._checkHtmlCancel("up");}));this._cons.push(_4.connect(this._fileInput,"change",this,function(){this._checkHtmlCancel("change");this._change([{name:this._fileInput.value,type:"",size:0}]);}));if(this.tabIndex>=0){_4.attr(this.domNode,"tabIndex",this.tabIndex);}},_checkHtmlCancel:function(_3a){if(_3a=="change"){this.dialogIsOpen=false;}if(_3a=="up"){this.dialogIsOpen=true;}if(_3a=="off"){if(this.dialogIsOpen){this.onCancel();}this.dialogIsOpen=false;}},_styleContent:function(){var o=this.fhtml.nr;_4.style(this.insideNode,{width:o.w+"px",height:o.va=="middle"?o.h+"px":"auto",textAlign:o.ta,paddingTop:o.p[0]+"px",paddingRight:o.p[1]+"px",paddingBottom:o.p[2]+"px",paddingLeft:o.p[3]+"px"});try{_4.style(this.insideNode,"lineHeight","inherit");}catch(e){}},_resetHTML:function(){if(this.uploaderType=="html"&&this._formNode){this.fileInputs=[];_4.query("*",this._formNode).forEach(function(n){_4.destroy(n);});this.fileCount=0;this._buildFileInput();this._connectInput();}},_buildForm:function(){if(this._formNode){return;}if(_4.isIE){this._formNode=document.createElement("<form enctype=\"multipart/form-data\" method=\"post\">");this._formNode.encoding="multipart/form-data";}else{this._formNode=document.createElement("form");this._formNode.setAttribute("enctype","multipart/form-data");}this._formNode.id=_5.getUniqueId("FileUploaderForm");this.domNode.appendChild(this._formNode);},_buildFileInput:function(){if(this._fileInput){this._disconnect();this._fileInput.id=this._fileInput.id+this.fileCount;_4.style(this._fileInput,"display","none");}this._fileInput=document.createElement("input");this.fileInputs.push(this._fileInput);var nm=this.htmlFieldName;var _3b=this.id;if(this.selectMultipleFiles){nm+=this.fileCount;_3b+=this.fileCount;this.fileCount++;}_4.attr(this._fileInput,{id:this.id,name:nm,type:"file"});_4.addClass(this._fileInput,"dijitFileInputReal");this._formNode.appendChild(this._fileInput);var _3c=_4.marginBox(this._fileInput);_4.style(this._fileInput,{position:"relative",left:(this.fhtml.nr.w-_3c.w)+"px",opacity:0});},_renumberInputs:function(){if(!this.selectMultipleFiles){return;}var nm;this.fileCount=0;_4.forEach(this.fileInputs,function(inp){nm=this.htmlFieldName+this.fileCount;this.fileCount++;_4.attr(inp,"name",nm);},this);},_setFormStyle:function(){var _3d=Math.max(2,Math.max(Math.ceil(this.fhtml.nr.w/60),Math.ceil(this.fhtml.nr.h/15)));_6.html.insertCssRule("#"+this._formNode.id+" input","font-size:"+_3d+"em");_4.style(this.domNode,{overflow:"hidden",position:"relative"});_4.style(this.insideNode,"position","absolute");},_setHtmlPostData:function(){if(this.postData){for(var nm in this.postData){_4.create("input",{type:"hidden",name:nm,value:this.postData[nm]},this._formNode);}}},uploadFlash:function(){try{if(this.showProgress){this._displayProgress(true);var c=_4.connect(this,"_complete",this,function(){_4.disconnect(c);this._displayProgress(false);});}this.flashMovie.doUpload(this.postData);}catch(err){this._error("FileUploader - Sorry, the SWF failed to initialize."+err);}},createFlashUploader:function(){this.uploadUrl=this.uploadUrl.toString();if(this.uploadUrl){if(this.uploadUrl.toLowerCase().indexOf("http")<0&&this.uploadUrl.indexOf("/")!=0){var loc=window.location.href.split("/");loc.pop();loc=loc.join("/")+"/";this.uploadUrl=loc+this.uploadUrl;this.log("SWF Fixed - Relative loc:",loc," abs loc:",this.uploadUrl);}else{this.log("SWF URL unmodified:",this.uploadUrl);}}else{console.warn("Warning: no uploadUrl provided.");}var w=this.fhtml.nr.w;var h=this.fhtml.nr.h;var _3e={expressInstall:true,path:this.swfPath.uri||this.swfPath,width:w,height:h,allowScriptAccess:"always",allowNetworking:"all",vars:{uploadDataFieldName:this.flashFieldName,uploadUrl:this.uploadUrl,uploadOnSelect:this.uploadOnChange,deferredUploading:this.deferredUploading||0,selectMultipleFiles:this.selectMultipleFiles,id:this.id,isDebug:this.isDebug,devMode:this.devMode,flashButton:_6.embed.flashVars.serialize("fh",this.fhtml),fileMask:_6.embed.flashVars.serialize("fm",this.fileMask),noReturnCheck:this.skipServerCheck,serverTimeout:this.serverTimeout},params:{scale:"noscale",wmode:"opaque"}};this.flashObject=new _6.embed.Flash(_3e,this.insideNode);this.flashObject.onError=_4.hitch(function(msg){this._error("Flash Error: "+msg);});this.flashObject.onReady=_4.hitch(this,function(){_4.style(this.insideNode,"visibility","visible");this.log("FileUploader flash object ready");this.onReady(this);});this.flashObject.onLoad=_4.hitch(this,function(mov){this.flashMovie=mov;this.flashReady=true;this.onLoad(this);});this._connectFlash();},_connectFlash:function(){this._doSub("/filesSelected","_change");this._doSub("/filesUploaded","_complete");this._doSub("/filesProgress","_progress");this._doSub("/filesError","_error");this._doSub("/filesCanceled","onCancel");this._doSub("/stageBlur","_onFlashBlur");this._doSub("/up","onMouseUp");this._doSub("/down","onMouseDown");this._doSub("/over","onMouseOver");this._doSub("/out","onMouseOut");this.connect(this.domNode,"focus",function(){this.flashMovie.focus();this.flashMovie.doFocus();});if(this.tabIndex>=0){_4.attr(this.domNode,"tabIndex",this.tabIndex);}},_doSub:function(_3f,_40){this._subs.push(_4.subscribe(this.id+_3f,this,_40));}});})();}}};});