/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.charting.plot2d.Default"],["require","dojox.charting.plot2d.common"],["require","dojox.charting.plot2d.Base"],["require","dojox.lang.utils"],["require","dojox.lang.functional"],["require","dojox.lang.functional.reversed"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.charting.plot2d.Default"]){_4._hasResource["dojox.charting.plot2d.Default"]=true;_4.provide("dojox.charting.plot2d.Default");_4.require("dojox.charting.plot2d.common");_4.require("dojox.charting.plot2d.Base");_4.require("dojox.lang.utils");_4.require("dojox.lang.functional");_4.require("dojox.lang.functional.reversed");(function(){var df=_6.lang.functional,du=_6.lang.utils,dc=_6.charting.plot2d.common,_7=df.lambda("item.purgeGroup()");_4.declare("dojox.charting.plot2d.Default",_6.charting.plot2d.Base,{defaultParams:{hAxis:"x",vAxis:"y",lines:true,areas:false,markers:false,shadows:0,tension:0},optionalParams:{},constructor:function(_8,_9){this.opt=_4.clone(this.defaultParams);du.updateWithObject(this.opt,_9);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;},calculateAxes:function(_a){this._calc(_a,dc.collectSimpleStats(this.series));return this;},render:function(_b,_c){this.dirty=this.isDirty();if(this.dirty){_4.forEach(this.series,_7);this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(_d){_d.cleanGroup(s);});}var t=this.chart.theme,_e,_f,_10,_11,_12=this.events();this.resetEvents();for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){continue;}run.cleanGroup();if(!run.data.length){run.dirty=false;continue;}var s=run.group,_13,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler);if(typeof run.data[0]=="number"){_13=_4.map(run.data,function(v,i){return {x:ht(i+1)+_c.l,y:_b.height-_c.b-vt(v)};},this);}else{_13=_4.map(run.data,function(v,i){return {x:ht(v.x)+_c.l,y:_b.height-_c.b-vt(v.y)};},this);}if(!run.fill||!run.stroke){_10=run.dyn.color=new _4.Color(t.next("color"));}var _14=this.opt.tension?dc.curve(_13,this.opt.tension):"";if(this.opt.areas){var _15=run.fill?run.fill:dc.augmentFill(t.series.fill,_10);var _16=_4.clone(_13);if(this.opt.tension){var _17="L"+_16[_16.length-1].x+","+(_b.height-_c.b)+" L"+_16[0].x+","+(_b.height-_c.b)+" L"+_16[0].x+","+_16[0].y;run.dyn.fill=s.createPath(_14+" "+_17).setFill(_15).getFill();}else{_16.push({x:_13[_13.length-1].x,y:_b.height-_c.b});_16.push({x:_13[0].x,y:_b.height-_c.b});_16.push(_13[0]);run.dyn.fill=s.createPolyline(_16).setFill(_15).getFill();}}if(this.opt.lines||this.opt.markers){_e=run.dyn.stroke=run.stroke?dc.makeStroke(run.stroke):dc.augmentStroke(t.series.stroke,_10);if(run.outline||t.series.outline){_f=run.dyn.outline=dc.makeStroke(run.outline?run.outline:t.series.outline);_f.width=2*_f.width+_e.width;}}if(this.opt.markers){_11=run.dyn.marker=run.marker?run.marker:t.next("marker");}var _18=null,_19=null,_1a=null;if(this.opt.shadows&&_e){var sh=this.opt.shadows,_1b=new _4.Color([0,0,0,0.3]),_1c=_4.map(_13,function(c){return {x:c.x+sh.dx,y:c.y+sh.dy};}),_1d=_4.clone(_f?_f:_e);_1d.color=_1b;_1d.width+=sh.dw?sh.dw:0;if(this.opt.lines){if(this.opt.tension){run.dyn.shadow=s.createPath(dc.curve(_1c,this.opt.tension)).setStroke(_1d).getStroke();}else{run.dyn.shadow=s.createPolyline(_1c).setStroke(_1d).getStroke();}}if(this.opt.markers){_1a=_4.map(_1c,function(c){return s.createPath("M"+c.x+" "+c.y+" "+_11).setStroke(_1d).setFill(_1b);},this);}}if(this.opt.lines){if(_f){if(this.opt.tension){run.dyn.outline=s.createPath(_14).setStroke(_f).getStroke();}else{run.dyn.outline=s.createPolyline(_13).setStroke(_f).getStroke();}}if(this.opt.tension){run.dyn.stroke=s.createPath(_14).setStroke(_e).getStroke();}else{run.dyn.stroke=s.createPolyline(_13).setStroke(_e).getStroke();}}if(this.opt.markers){_18=new Array(_13.length);_19=new Array(_13.length);_4.forEach(_13,function(c,i){var _1e="M"+c.x+" "+c.y+" "+_11;if(_f){_19[i]=s.createPath(_1e).setStroke(_f);}_18[i]=s.createPath(_1e).setStroke(_e).setFill(_e.color);},this);if(_12){_4.forEach(_18,function(s,i){var o={element:"marker",index:i,run:run,plot:this,hAxis:this.hAxis||null,vAxis:this.vAxis||null,shape:s,outline:_19[i]||null,shadow:_1a&&_1a[i]||null,cx:_13[i].x,cy:_13[i].y};if(typeof run.data[0]=="number"){o.x=i+1;o.y=run.data[i];}else{o.x=run.data[i].x;o.y=run.data[i].y;}this._connectEvents(s,o);},this);}}run.dirty=false;}this.dirty=false;return this;}});})();}}};});