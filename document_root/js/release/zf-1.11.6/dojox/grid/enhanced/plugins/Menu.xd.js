/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.grid.enhanced.plugins.Menu"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.grid.enhanced.plugins.Menu"]){_4._hasResource["dojox.grid.enhanced.plugins.Menu"]=true;_4.provide("dojox.grid.enhanced.plugins.Menu");_4.declare("dojox.grid.enhanced.plugins.Menu",null,{constructor:function(_7){_7.mixin(_7,this);},_initMenus:function(){var _8=this.menuContainer;!this.headerMenu&&(this.headerMenu=this._getMenuWidget(this.menus["headerMenu"]));!this.rowMenu&&(this.rowMenu=this._getMenuWidget(this.menus["rowMenu"]));!this.cellMenu&&(this.cellMenu=this._getMenuWidget(this.menus["cellMenu"]));!this.selectedRegionMenu&&(this.selectedRegionMenu=this._getMenuWidget(this.menus["selectedRegionMenu"]));this.headerMenu&&this.attr("headerMenu",this.headerMenu)&&this.setupHeaderMenu();this.rowMenu&&this.attr("rowMenu",this.rowMenu);this.cellMenu&&this.attr("cellMenu",this.cellMenu);this.isDndSelectEnable&&this.selectedRegionMenu&&_4.connect(this.select,"setDrugCoverDivs",_4.hitch(this,this._bindDnDSelectEvent));},_getMenuWidget:function(_9){if(!_9){return;}var _a=_5.byId(_9);if(!_a){throw new Error("Menu '"+_9+"' not existed");}return _a;},_bindDnDSelectEvent:function(){_4.forEach(this.select.coverDIVs,_4.hitch(this,function(_b){this.selectedRegionMenu.bindDomNode(_b);_4.connect(_b,"contextmenu",_4.hitch(this,function(e){_4.mixin(e,this.select.getSelectedRegionInfo());this.onSelectedRegionContextMenu(e);}));}));},_setRowMenuAttr:function(_c){this._setRowCellMenuAttr(_c,"rowMenu");},_setCellMenuAttr:function(_d){this._setRowCellMenuAttr(_d,"cellMenu");},_setRowCellMenuAttr:function(_e,_f){if(!_e){return;}if(this[_f]){this[_f].unBindDomNode(this.domNode);}this[_f]=_e;this[_f].bindDomNode(this.domNode);},showRowCellMenu:function(e){var _10=e.sourceView.declaredClass=="dojox.grid._RowSelector";if(this.rowMenu&&(!e.cell||this.selection.isSelected(e.rowIndex))){this.rowMenu._openMyself({target:e.target,coords:"pageX" in e?{x:e.pageX,y:e.pageY}:null});_4.stopEvent(e);return;}if(_10||e.cell&&e.cell.isRowSelector){_4.stopEvent(e);return;}if(this.isDndSelectEnable){this.select.cellClick(e.cellIndex,e.rowIndex);this.focus.setFocusCell(e.cell,e.rowIndex);}if(this.cellMenu){this.cellMenu._openMyself({target:e.target,coords:"pageX" in e?{x:e.pageX,y:e.pageY}:null});}}});}}};});