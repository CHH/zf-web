/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.grid.enhanced.dnd._DndMovingManager"],["require","dojox.grid.enhanced.dnd._DndSelectingManager"],["require","dojox.grid.enhanced.dnd._DndMover"],["require","dojo.dnd.move"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.grid.enhanced.dnd._DndMovingManager"]){_4._hasResource["dojox.grid.enhanced.dnd._DndMovingManager"]=true;_4.provide("dojox.grid.enhanced.dnd._DndMovingManager");_4.require("dojox.grid.enhanced.dnd._DndSelectingManager");_4.require("dojox.grid.enhanced.dnd._DndMover");_4.require("dojo.dnd.move");_4.declare("dojox.grid.enhanced.dnd._DndMovingManager",_6.grid.enhanced.dnd._DndSelectingManager,{exceptRowsTo:-1,exceptColumnsTo:-1,coverDIVs:[],movers:[],constructor:function(_7){if(this.grid.indirectSelection){this.exceptColumnsTo=this.grid.pluginMgr.getFixedCellNumber()-1;}this.coverDIVs=this.movers=[];_4.subscribe("CTRL_KEY_DOWN",_4.hitch(this,function(_8,_9){if(_8==this.grid&&_8!=this){this.keyboardMove(_9);}}));_4.forEach(this.grid.views.views,function(_a){_4.connect(_a.scrollboxNode,"onscroll",_4.hitch(this,function(){this.clearDrugDivs();}));},this);},getGridWidth:function(){return _4.contentBox(this.grid.domNode).w-this.grid.views.views[0].getWidth().replace("px","");},isColSelected:function(_b){return this.selectedColumns[_b]&&_b>this.exceptColumnsTo;},getHScrollBarHeight:function(){this.scrollbarHeight=0;_4.forEach(this.grid.views.views,function(_c,_d){if(_c.scrollboxNode){var _e=_c.scrollboxNode.offsetHeight-_c.scrollboxNode.clientHeight;this.scrollbarHeight=_e>this.scrollbarHeight?_e:this.scrollbarHeight;}},this);return this.scrollbarHeight;},getExceptionalColOffsetWidth:function(){if(!this.grid.indirectSelection||!this.grid.rowSelectCell){return 0;}var _f=(normalizedOffsetWidth=0),_10=this.grid.rowSelectCell.view.scrollboxNode;_4.forEach(this.getHeaderNodes(),function(_11,_12){if(_12<=this.exceptColumnsTo){var _13=_4.coords(_11);_f+=_13.w;}},this);normalizedOffsetWidth=_f-_10.scrollLeft*(_4._isBodyLtr()?1:(_4.isMoz?-1:1));return normalizedOffsetWidth>0?normalizedOffsetWidth:0;},getGridCoords:function(_14){if(!this.gridCoords||_14){this.gridCoords=new Object();if(!this.headerHeight){this.headerHeight=_4.coords(this.getHeaderNodes()[0]).h;}var _15=_4.coords(this.grid.views.views[0].domNode);var _16=_4.coords(this.grid.domNode);var _17=_4.contentBox(this.grid.domNode);this.gridCoords.h=_17.h-this.headerHeight-this.getHScrollBarHeight();this.gridCoords.t=_16.y;this.gridCoords.l=_4._isBodyLtr()?(_16.x+_15.w):_16.x;this.gridCoords.w=_17.w-_15.w;}return this.gridCoords;},createAvatar:function(_18,_19,_1a,top,_1b){this.gridCoords=null;var _1c=this.getGridCoords();var _1d=_4.doc.createElement("DIV");_1d.className="dojoxGridSelectedDIV";_1d.id="grid_dnd_cover_div_"+_1a+"_"+top;_1d.style.width=_18+"px";var _1e=_4._docScroll();var _1f=top<_1c.t+this.headerHeight?_1c.t+this.headerHeight-top:0;var _20=_1c.t+_1c.h+this.headerHeight;var _21=0;if(top<_1c.t+this.headerHeight){_21=(_1c.t+this.headerHeight);}else{if(top>_20){_21=10000;}else{_21=top;}}_1d.style.top=_21+_1e.y+"px";_1d.style.left=(_1a+_1e.x)+"px";var _22=_21+_19-_1f;if(_22>_20+(_1b?this.scrollbarHeight:0)){_22=_20;}_1d.style.height=((_22-_21)>=0?(_22-_21):0)+"px";_4.doc.body.appendChild(_1d);_1d.connections=[];_1d.connections.push(_4.connect(_1d,"onmouseout",this,function(){this.clearDrugDivs();}));_1d.connections.push(_4.connect(_1d,"onclick",this,"avataDivClick"));_1d.connections.push(_4.connect(_1d,"keydown",this,function(e){this.handleESC(e,this);}));this.coverDIVs.push(_1d);return _1d;},handleESC:function(e,_23){var dk=_4.keys;switch(e.keyCode){case dk.ESCAPE:try{this.cancelDND();}catch(e){console.debug(e);}break;}},cancelDND:function(){this.cleanAll();this.clearDrugDivs();if(this.mover){this.mover.destroy();}this.cleanAll();},createCoverMover:function(_24,_25,_26,top,_27){var _28=this.getGridCoords(),_29=(_27=="col"?true:false);var _2a={box:{l:(_27=="row"?_26:_28.l)+_4._docScroll().x,t:(_27=="col"?top:_28.t+this.headerHeight)+_4._docScroll().y,w:_27=="row"?1:_28.w,h:_27=="col"?1:_28.h},within:true,movingType:_27,mover:_6.grid.enhanced.dnd._DndMover};return new _6.grid.enhanced.dnd._DndBoxConstrainedMoveable(this.createAvatar(_24,_25,_26,top,_29),_2a);},getBorderDiv:function(){var _2b=_4.byId("borderDIV"+this.grid.id);if(_2b==null){_2b=_4.doc.createElement("DIV");_2b.id="borderDIV"+this.grid.id;_2b.className="dojoxGridBorderDIV";_4.doc.body.appendChild(_2b);}return _2b;},setBorderDiv:function(_2c,_2d,_2e,top){var _2f=this.getBorderDiv();_4.style(_2f,{"height":_2d+"px","top":top+"px","width":_2c+"px","left":_2e+"px"});return _2f;},removeOtherMovers:function(id){if(!this.coverDIVs.hasRemovedOtherMovers){var _30;_4.forEach(this.coverDIVs,function(div){if(div.id!=id){_4.doc.body.removeChild(div);}else{_30=div;}},this);this.coverDIVs=[_30];this.coverDIVs.hasRemovedOtherMovers=true;}},addColMovers:function(){var _31=-1;_4.forEach(this.selectedColumns,function(col,_32){if(this.isColSelected(_32)){if(_31==-1){_31=_32;}if(this.selectedColumns[_32+1]==null){this.addColMover(_31,_32);_31=-1;}}},this);},addColMover:function(_33,_34){if(this.lock){return;}var _35=(_36=0);var top=null,_37=null;if(_4._isBodyLtr()){_4.forEach(this.getHeaderNodes(),function(_38,_39){var _3a=_4.coords(_38);if(_39==_33){_35=_3a.x;top=_3a.y+_3a.h;_37=_3a.h;}if(_39==_34){_36=_3a.x+_3a.w;}});}else{_4.forEach(this.getHeaderNodes(),function(_3b,_3c){var _3d=_4.coords(_3b);if(_3c==_33){_36=_3d.x+_3d.w;_37=_3d.h;}if(_3c==_34){_35=_3d.x;top=_3d.y+_3d.h;}});}var _3e=this.normalizeColMoverCoords(_35,_36,_33,_34);var _3f=_3e.h,_40=_3e.w,_35=_3e.l,_36=_3e.r;var _41=this.createCoverMover(_40,_3f,_35,top,"col");this.movers.push(_41);var _42=this.setBorderDiv(3,_3f,-1000,top+_4._docScroll().y);_4.attr(_42,"colH",_3e.colH);_4.connect(_41,"onMoveStart",_4.hitch(this,function(_43,_44){this.mover=_43;this.removeOtherMovers(_43.node.id);}));_4.connect(_41,"onMove",_4.hitch(this,function(_45,_46,_47){if(_45.node==null||_45.node.parentNode==null){return;}this.isMoving=true;this.moveColBorder(_45,_47,_42);}));_4.connect(_41,"onMoveStop",_4.hitch(this,function(_48){if(this.drugDestIndex==null||this.isContinuousSelection(this.selectedColumns)&&(this.drugDestIndex==_33||this.drugDestIndex==_34||this.drugDestIndex==(_34+1)&&this.drugBefore)){this.movingIgnored=true;if(this.isMoving){this.isMoving=false;this.clearDrugDivs();}return;}this.isMoving=false;this.mover=null;this.startMoveCols();this.drugDestIndex=null;}));},normalizeColMoverCoords:function(_49,_4a,_4b,_4c){var _4d=_4a-_49,_4e=this.grid.views.views,_4f=this.grid.pluginMgr;var _50={"w":_4d,"h":0,"l":_49,"r":_4a,"colH":0};var _51=this.getGridWidth()-_4e[_4e.length-1].getScrollbarWidth();var rtl=!_4._isBodyLtr();var _52=_4f.getViewByCellIdx(!rtl?_4b:_4c);var _53=_4f.getViewByCellIdx(!rtl?_4c:_4b);var _54=(_52==_53);if(!_52||!_53){return _50;}var _55=_4.coords(_52.scrollboxNode).x+(rtl&&_4.isIE?_52.getScrollbarWidth():0);var _56=_4.coords(_53.scrollboxNode);var _57=_56.x+_56.w-((!rtl||!_4.isIE)?_53.getScrollbarWidth():0);if(_50.l<_55){_50.w=_50.r-_55;_50.l=_55;}if(_50.r>_57){_50.w=_57-_50.l;}var i,_58=this.grid.views.views[0],_59=_4.coords(_58.contentNode).h;var _5a=_53,_5b=_56.h;_50.colH=_59;_5b=!_54?_5b:(_5b-(_5a.scrollboxNode.offsetHeight-_5a.scrollboxNode.clientHeight));_50.h=_59<_5b?_59:_5b;return _50;},moveColBorder:function(_5c,_5d,_5e){var _5f=_4._docScroll(),rtl=!_4._isBodyLtr();_5d.x-=_5f.x;var _60=this.grid.views.views,_61=this.getGridCoords();var _62=_60[!rtl?1:_60.length-1].scrollboxNode;var _63=_60[!rtl?_60.length-1:1].scrollboxNode;var _64=(!rtl||!_4.isIE)?_61.l:(_61.l+_62.offsetWidth-_62.clientWidth);var _65=(!rtl||_4.isMoz)?(_61.l+_61.w-(_63.offsetWidth-_63.clientWidth)):(_61.l+_61.w);_4.forEach(this.getHeaderNodes(),_4.hitch(this,function(_66,_67){if(_67>this.exceptColumnsTo){var x,_68=_4.coords(_66);if(_5d.x>=_68.x&&_5d.x<=_68.x+_68.w){if(!this.selectedColumns[_67]||!this.selectedColumns[_67-1]){x=_68.x+_5f.x+(rtl?_68.w:0);if(_5d.x<_64||_5d.x>_65||x<_64||x>_65){return;}_4.style(_5e,"left",x+"px");this.drugDestIndex=_67;this.drugBefore=true;!_4.isIE&&this.normalizeColBorderHeight(_5e,_67);}}else{if(this.getHeaderNodes()[_67+1]==null&&(!rtl?(_5d.x>_68.x+_68.w):(_5d.x<_68.x))){x=_5d.x<_64?_64:(_5d.x>_65?_65:(_68.x+_5f.x+(rtl?0:_68.w)));_4.style(_5e,"left",x+"px");this.drugDestIndex=_67;this.drugBefore=false;!_4.isIE&&this.normalizeColBorderHeight(_5e,_67);}}}}));},normalizeColBorderHeight:function(_69,_6a){var _6b=this.grid.pluginMgr.getViewByCellIdx(_6a);if(!_6b){return;}var _6c=_6b.scrollboxNode,_6d=_4.attr(_69,"colH");var _6e=_4.coords(_6c).h-(_6c.offsetHeight-_6c.clientHeight);_6e=_6d>0&&_6d<_6e?_6d:_6e;_4.style(_69,"height",_6e+"px");},avataDivClick:function(e){if(this.movingIgnored){this.movingIgnored=false;return;}this.cleanAll();this.clearDrugDivs();},startMoveCols:function(){this.changeCursorState("wait");this.srcIndexdelta=0;deltaColAmount=0;_4.forEach(this.selectedColumns,_4.hitch(this,function(col,_6f){if(this.isColSelected(_6f)){if(this.drugDestIndex>_6f){_6f-=deltaColAmount;}deltaColAmount+=1;var _70=this.grid.layout.cells[_6f].view.idx;var _71=this.grid.layout.cells[this.drugDestIndex].view.idx;if(_6f!=this.drugDestIndex){this.grid.layout.moveColumn(_70,_71,_6f,this.drugDestIndex,this.drugBefore);}if(this.drugDestIndex<=_6f&&this.drugDestIndex+1<this.grid.layout.cells.length){this.drugDestIndex+=1;}}}));var _72=this.drugDestIndex+(this.drugBefore?0:1);this.clearDrugDivs();this.cleanAll();this.resetCellIdx();this.drugSelectionStart.colIndex=_72-deltaColAmount;this.drugSelectColumn(this.drugSelectionStart.colIndex+deltaColAmount-1);},changeCursorState:function(_73){_4.forEach(this.coverDIVs,function(div){div.style.cursor="wait";});},addRowMovers:function(){var _74=-1;_4.forEach(this.grid.selection.selected,function(row,_75){var _76=this.grid.views.views[0];if(row&&_76.rowNodes[_75]){if(_74==-1){_74=_75;}if(this.grid.selection.selected[_75+1]==null||!_76.rowNodes[_75+1]){this.addRowMover(_74,_75);_74=-1;}}},this);},addRowMover:function(_77,to){var _78=0,_79=this.grid.views.views;_4.forEach(_79,function(_7a,_7b){_78+=_7a.getScrollbarWidth();});var _7c=_79[_79.length-1].getScrollbarWidth();var _7d=!_4._isBodyLtr()?(_4.isIE?_78-_7c:_78):0;var _7e=this.getGridWidth()-_7c;var _7f=this.grid.views.views[0];var _80=_7f.rowNodes[_77],_81=_7f.rowNodes[to];if(!_80||!_81){return;}var _82=_4.coords(_80),_83=_4.coords(_81);var _84=this.getExceptionalColOffsetWidth();var _85=this.createCoverMover(_7e-_84,(_83.y-_82.y+_83.h),_4._isBodyLtr()?(_82.x+_82.w+_84):(_82.x-_7e-_7d),_82.y,"row");var _86=this.setBorderDiv(_7e,3,(_4._isBodyLtr()?(_83.x+_83.w):(_83.x-_7e-_7d))+_4._docScroll().x,-100);var _87=_4.connect(_85,"onMoveStart",_4.hitch(this,function(_88,_89){this.mover=_88;this.removeOtherMovers(_88.node.id);}));var _8a=_4.connect(_85,"onMove",_4.hitch(this,function(_8b,_8c,_8d){if(_8b.node==null||_8b.node.parentNode==null){return;}this.isMoving=true;this.moveRowBorder(_8b,_8c,_86,_8d);}));var _8e=_4.connect(_85,"onMoveStop",_4.hitch(this,function(_8f){if(this.avaOnRowIndex==null||this.isContinuousSelection(this.grid.selection.selected)&&(this.avaOnRowIndex==_77||this.avaOnRowIndex==(to+1))){this.movingIgnored=true;if(this.isMoving){this.isMoving=false;this.clearDrugDivs();}return;}this.isMoving=false;this.mover=null;this.grid.select.outRangeY=false;this.grid.select.moveOutTop=false;this.grid.scroller.findScrollTop(this.grid.scroller.page*this.grid.scroller.rowsPerPage);this.startMoveRows();this.avaOnRowIndex=null;delete _85;}));},moveRowBorder:function(_90,_91,_92,_93){var _94=this.getGridCoords(true),_95=_4._docScroll();var _96=_94.t+this.headerHeight+_94.h;_91.t-=_95.y,_93.y-=_95.y;if(_93.y>=_96){this.grid.select.outRangeY=true;this.autoMoveToNextRow();}else{if(_93.y<=_94.t+this.headerHeight){this.grid.select.moveOutTop=true;this.autoMoveToPreRow();}else{this.grid.select.outRangeY=this.grid.select.moveOutTop=false;var _97=this.grid.views.views[0],_98=_97.rowNodes;var _99=_4.coords(_97.contentNode).h;var _9a=0,_9b=-1;for(i in _98){++_9a;if(i>_9b){_9b=i;}}var _9c=_4.coords(_98[_9b]);if(_99<_94.h&&_93.y>(_9c.y+_9c.h)){this.avaOnRowIndex=_9a;_4.style(_92,{"top":_9c.y+_9c.h+_95.y+"px"});return;}var _9d,_9e,_9f;for(var _a0 in _98){_a0=parseInt(_a0);if(isNaN(_a0)){continue;}_9e=_98[_a0];if(!_9e){continue;}_9d=_4.coords(_9e),_9f=(_9d.y<=_96);if(_9f&&_93.y>_9d.y&&_93.y<_9d.y+_9d.h){if(!this.grid.selection.selected[_a0]||!this.grid.selection.selected[_a0-1]){this.avaOnRowIndex=_a0;_4.style(_92,{"top":_9d.y+_95.y+"px"});}}}}}},autoMoveToPreRow:function(){if(this.grid.select.moveOutTop){if(this.grid.scroller.firstVisibleRow>0){this.grid.scrollToRow(this.grid.scroller.firstVisibleRow-1);this.autoMoveBorderDivPre();setTimeout(_4.hitch(this,"autoMoveToPreRow"),this.autoScrollRate);}}},autoMoveBorderDivPre:function(){var _a1=_4._docScroll(),_a2=this.getGridCoords();var _a3=_a2.t+this.headerHeight+_a1.y;var _a4,_a5=this.getBorderDiv();if(this.avaOnRowIndex-1<=0){this.avaOnRowIndex=0;_a4=_a3;}else{this.avaOnRowIndex--;_a4=_4.coords(this.grid.views.views[0].rowNodes[this.avaOnRowIndex]).y+_a1.y;}_a5.style.top=(_a4<_a3?_a3:_a4)+"px";},autoMoveToNextRow:function(){if(this.grid.select.outRangeY){if(this.avaOnRowIndex+1<=this.grid.scroller.rowCount){this.grid.scrollToRow(this.grid.scroller.firstVisibleRow+1);this.autoMoveBorderDiv();setTimeout(_4.hitch(this,"autoMoveToNextRow"),this.autoScrollRate);}}},autoMoveBorderDiv:function(){var _a6=_4._docScroll(),_a7=this.getGridCoords();var _a8=_a7.t+this.headerHeight+_a7.h+_a6.y;var _a9,_aa=this.getBorderDiv();if(this.avaOnRowIndex+1>=this.grid.scroller.rowCount){this.avaOnRowIndex=this.grid.scroller.rowCount;_a9=_a8;}else{this.avaOnRowIndex++;_a9=_4.coords(this.grid.views.views[0].rowNodes[this.avaOnRowIndex]).y+_a6.y;}_aa.style.top=(_a9>_a8?_a8:_a9)+"px";},startMoveRows:function(){var _ab=Math.min(this.avaOnRowIndex,this.getFirstSelected());var end=Math.max(this.avaOnRowIndex-1,this.getLastSelected());this.moveRows(_ab,end,this.getPageInfo());},moveRows:function(_ac,end,_ad){var i,_ae=false,_af=(selectedRowsAboveBorderDIV=0),_b0=[];var _b1=this.grid.scroller,_b2=_b1.rowsPerPage;var _b3=_ad.topPage*_b2,_b4=(_ad.bottomPage+1)*_b2-1;var _b5=_4.hitch(this,function(_b6,to){for(i=_b6;i<to;i++){if(!this.grid.selection.selected[i]||!this.grid._by_idx[i]){_b0.push(this.grid._by_idx[i]);}}});_b5(_ac,this.avaOnRowIndex);for(i=_ac;i<=end;i++){if(this.grid.selection.selected[i]&&this.grid._by_idx[i]){_b0.push(this.grid._by_idx[i]);_af++;if(this.avaOnRowIndex>i){selectedRowsAboveBorderDIV++;}}}_b5(this.avaOnRowIndex,end+1);for(i=_ac,j=0;i<=end;i++){this.grid._by_idx[i]=_b0[j++];if(i>=_b3&&i<=_b4){this.grid.updateRow(i);_ae=true;}}this.avaOnRowIndex+=_af-selectedRowsAboveBorderDIV;try{this.clearDrugDivs();this.cleanAll();this.drugSelectionStart.rowIndex=this.avaOnRowIndex-_af;this.drugSelectRow(this.drugSelectionStart.rowIndex+_af-1);if(_ae){var _b7=_b1.stack;_4.forEach(_ad.invalidPages,function(_b8){_b1.destroyPage(_b8);i=_4.indexOf(_b7,_b8);if(i>=0){_b7.splice(i,1);}});}this.publishRowMove();}catch(e){console.debug(e);}},clearDrugDivs:function(){if(!this.isMoving){var _b9=this.getBorderDiv();_b9.style.top=-100+"px";_b9.style.height="0px";_b9.style.left=-100+"px";_4.forEach(this.coverDIVs,function(div){_4.forEach(div.connections,function(_ba){_4.disconnect(_ba);});_4.doc.body.removeChild(div);delete div;},this);this.coverDIVs=[];}},setDrugCoverDivs:function(_bb,_bc){if(!this.isMoving){if(this.isColSelected(_bb)){this.addColMovers();}else{if(this.grid.selection.selected[_bc]){this.addRowMovers();}else{this.clearDrugDivs();}}}},getPageInfo:function(){var _bd=this.grid.scroller,_be=(bottomPage=_bd.page);var _bf=_bd.firstVisibleRow,_c0=_bd.lastVisibleRow;var _c1=_bd.rowsPerPage,_c2=_bd.pageNodes[0];var _c3,_c4,_c5=[],_c6;_4.forEach(_c2,function(_c7,_c8){if(!_c7){return;}_c6=false;_c3=_c8*_c1;_c4=(_c8+1)*_c1-1;if(_bf>=_c3&&_bf<=_c4){_be=_c8;_c6=true;}if(_c0>=_c3&&_c0<=_c4){bottomPage=_c8;_c6=true;}if(!_c6&&(_c3>_c0||_c4<_bf)){_c5.push(_c8);}});return {topPage:_be,bottomPage:bottomPage,invalidPages:_c5};},resetCellIdx:function(){var _c9=0;var _ca=-1;_4.forEach(this.grid.views.views,function(_cb,_cc){if(_cc==0){return;}if(_cb.structure.cells&&_cb.structure.cells[0]){_4.forEach(_cb.structure.cells[0],function(_cd,_ce){var _cf=_cd.markup[2].split(" ");var idx=_c9+_ce;_cf[1]="idx=\""+idx+"\"";_cd.markup[2]=_cf.join(" ");});}for(i in _cb.rowNodes){if(!_cb.rowNodes[i]){return;}_4.forEach(_cb.rowNodes[i].firstChild.rows[0].cells,function(_d0,_d1){if(_d0&&_d0.attributes){if(_d1+_c9>_ca){_ca=_d1+_c9;}var idx=document.createAttribute("idx");idx.value=_d1+_c9;_d0.attributes.setNamedItem(idx);}});}_c9=_ca+1;});},publishRowMove:function(){_4.publish(this.grid.rowMovedTopic,[this]);},keyboardMove:function(_d2){var _d3=this.selectedColumns.length>0;var _d4=_4.hitch(this.grid.selection,_6.grid.Selection.prototype["getFirstSelected"])()>=0;var i,_d5,dk=_4.keys,_d6=_d2.keyCode;if(!_4._isBodyLtr()){_d6=(_d2.keyCode==dk.LEFT_ARROW)?dk.RIGHT_ARROW:(_d2.keyCode==dk.RIGHT_ARROW?dk.LEFT_ARROW:_d6);}switch(_d6){case dk.LEFT_ARROW:if(!_d3){return;}_d5=this.getHeaderNodes().length;for(i=0;i<_d5;i++){if(this.isColSelected(i)){this.drugDestIndex=i-1;this.drugBefore=true;break;}}var _d7=this.grid.indirectSelection?1:0;(this.drugDestIndex>=_d7)?this.startMoveCols():(this.drugDestIndex=_d7);break;case dk.RIGHT_ARROW:if(!_d3){return;}_d5=this.getHeaderNodes().length;this.drugBefore=true;for(i=0;i<_d5;i++){if(this.isColSelected(i)&&!this.isColSelected(i+1)){this.drugDestIndex=i+2;if(this.drugDestIndex==_d5){this.drugDestIndex--;this.drugBefore=false;}break;}}if(this.drugDestIndex<_d5){this.startMoveCols();}break;case dk.UP_ARROW:if(!_d4){return;}this.avaOnRowIndex=_4.hitch(this.grid.selection,_6.grid.Selection.prototype["getFirstSelected"])()-1;if(this.avaOnRowIndex>-1){this.startMoveRows();}break;case dk.DOWN_ARROW:if(!_d4){return;}for(i=0;i<this.grid.rowCount;i++){if(this.grid.selection.selected[i]&&!this.grid.selection.selected[i+1]){this.avaOnRowIndex=i+2;break;}}if(this.avaOnRowIndex<=this.grid.rowCount){this.startMoveRows();}}}});}}};});