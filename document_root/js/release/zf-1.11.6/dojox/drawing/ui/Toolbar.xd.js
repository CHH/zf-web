/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojox.drawing.ui.Toolbar"],["require","dojox.drawing.library.icons"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojox.drawing.ui.Toolbar"]){_4._hasResource["dojox.drawing.ui.Toolbar"]=true;_4.provide("dojox.drawing.ui.Toolbar");_4.require("dojox.drawing.library.icons");_4.declare("dojox.drawing.ui.Toolbar",[],{constructor:function(_7,_8){this.util=_6.drawing.util.common;if(_7.drawing){this.toolDrawing=_7.drawing;this.drawing=this.toolDrawing;this.width=this.toolDrawing.width;this.height=this.toolDrawing.height;this.strSelected=_7.selected;this.strTools=_7.tools;this.strPlugs=_7.plugs;this._mixprops(["padding","margin","size","radius"],_7);this.addBack();}else{var _9=_4.marginBox(_8);this.width=_9.w;this.height=_9.h;this.strSelected=_4.attr(_8,"selected");this.strTools=_4.attr(_8,"tools");this.strPlugs=_4.attr(_8,"plugs");this._mixprops(["padding","margin","size","radius"],_8);this.toolDrawing=new _6.drawing.Drawing({mode:"ui"},_8);}this.horizontal=this.width>this.height;if(this.toolDrawing.ready){this.makeButtons();if(!this.strSelected&&this.drawing.defaults.clickMode){this.drawing.mouse.setCursor("default");}}else{var c=_4.connect(this.toolDrawing,"onSurfaceReady",this,function(){_4.disconnect(c);this.drawing=_6.drawing.getRegistered("drawing",_4.attr(_8,"drawingId"));this.makeButtons();if(!this.strSelected&&this.drawing.defaults.clickMode){var c=_4.connect(this.drawing,"onSurfaceReady",this,function(){_4.disconnect(c);this.drawing.mouse.setCursor("default");});}});}},padding:10,margin:5,size:30,radius:3,toolPlugGap:20,strSelected:"",strTools:"",strPlugs:"",makeButtons:function(){this.buttons=[];this.plugins=[];var x=this.padding,y=this.padding,w=this.size,h=this.size,r=this.radius,g=this.margin,_a=_6.drawing.library.icons,s={place:"BR",size:2,mult:4};if(this.strTools){var _b=[];if(this.strTools=="all"){for(var nm in _6.drawing.getRegistered("tool")){_b.push(this.util.abbr(nm));}}else{_b=this.strTools.split(",");_4.map(_b,function(t){return _4.trim(t);});}_4.forEach(_b,function(t){t=_4.trim(t);var _c=this.toolDrawing.addUI("button",{data:{x:x,y:y,width:w,height:h,r:r},toolType:t,icon:_a[t],shadow:s,scope:this,callback:"onToolClick"});this.buttons.push(_c);if(this.strSelected==t){_c.select();this.selected=_c;this.drawing.setTool(_c.toolType);}if(this.horizontal){y+=h+g;}else{y+=h+g;}},this);}if(this.horizontal){y+=this.toolPlugGap;}else{y+=this.toolPlugGap;}if(this.strPlugs){var _d=[];if(this.strPlugs=="all"){for(var nm in _6.drawing.getRegistered("plugin")){_d.push(this.util.abbr(nm));}}else{_d=this.strPlugs.split(",");_4.map(_d,function(p){return _4.trim(p);});}_4.forEach(_d,function(p){t=_4.trim(p);var _e=this.toolDrawing.addUI("button",{data:{x:x,y:y,width:w,height:h,r:r},toolType:t,icon:_a[t],shadow:s,scope:this,callback:"onPlugClick"});this.plugins.push(_e);if(this.horizontal){y+=h+g;}else{y+=h+g;}this.drawing.addPlugin({name:this.drawing.stencilTypeMap[p],options:{button:_e}});},this);}_4.connect(this.drawing,"onRenderStencil",this,"onRenderStencil");},onRenderStencil:function(_f){if(this.drawing.defaults.clickMode){this.drawing.mouse.setCursor("default");this.selected&&this.selected.deselect();this.selected=null;}},addTool:function(){},addPlugin:function(){},addBack:function(){this.toolDrawing.addUI("rect",{data:{x:0,y:0,width:this.width,height:this.size+(this.padding*2),fill:"#ffffff",borderWidth:0}});},onToolClick:function(_10){if(this.drawing.defaults.clickMode){this.drawing.mouse.setCursor("crosshair");}_4.forEach(this.buttons,function(b){if(b.id==_10.id){b.select();this.selected=b;this.drawing.setTool(_10.toolType);}else{b.deselect();}},this);},onPlugClick:function(_11){},_mixprops:function(_12,_13){_4.forEach(_12,function(p){this[p]=_13.tagName?_4.attr(_13,p)===null?this[p]:_4.attr(_13,p):_13[p]===undefined?this[p]:_13[p];},this);}});}}};});