/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["dijit._base.manager"]){dojo._hasResource["dijit._base.manager"]=true;dojo.provide("dijit._base.manager");dojo.declare("dijit.WidgetSet",null,{constructor:function(){this._hash={};this.length=0;},add:function(_1){if(this._hash[_1.id]){throw new Error("Tried to register widget with id=="+_1.id+" but that id is already registered");}this._hash[_1.id]=_1;this.length++;},remove:function(id){if(this._hash[id]){delete this._hash[id];this.length--;}},forEach:function(_2,_3){_3=_3||dojo.global;var i=0,id;for(id in this._hash){_2.call(_3,this._hash[id],i++,this._hash);}return this;},filter:function(_4,_5){_5=_5||dojo.global;var _6=new dijit.WidgetSet(),i=0,id;for(id in this._hash){var w=this._hash[id];if(_4.call(_5,w,i++,this._hash)){_6.add(w);}}return _6;},byId:function(id){return this._hash[id];},byClass:function(_7){var _8=new dijit.WidgetSet(),id,_9;for(id in this._hash){_9=this._hash[id];if(_9.declaredClass==_7){_8.add(_9);}}return _8;},toArray:function(){var ar=[];for(var id in this._hash){ar.push(this._hash[id]);}return ar;},map:function(_a,_b){return dojo.map(this.toArray(),_a,_b);},every:function(_c,_d){_d=_d||dojo.global;var x=0,i;for(i in this._hash){if(!_c.call(_d,this._hash[i],x++,this._hash)){return false;}}return true;},some:function(_e,_f){_f=_f||dojo.global;var x=0,i;for(i in this._hash){if(_e.call(_f,this._hash[i],x++,this._hash)){return true;}}return false;}});(function(_10,_11){_11.registry=new _11.WidgetSet();var _12=_11.registry._hash;_11.byId=function(id){return typeof id=="string"?_12[id]:id;};var _13={};_11.getUniqueId=function(_14){var id;do{id=_14+"_"+(_14 in _13?++_13[_14]:_13[_14]=0);}while(_12[id]);return id;};_11.findWidgets=function(_15){var _16=[];function _17(_18){for(var _19=_18.firstChild;_19;_19=_19.nextSibling){if(_19.nodeType==1){var _1a=_19.getAttribute("widgetId");if(_1a){_16.push(_12[_1a]);}else{_17(_19);}}}};_17(_15);return _16;};_11._destroyAll=function(){_11._curFocus=null;_11._prevFocus=null;_11._activeStack=[];_10.forEach(_11.findWidgets(_10.body()),function(_1b){if(!_1b._destroyed){if(_1b.destroyRecursive){_1b.destroyRecursive();}else{if(_1b.destroy){_1b.destroy();}}}});};if(_10.isIE){_10.addOnWindowUnload(function(){_11._destroyAll();});}_11.byNode=function(_1c){return _12[_1c.getAttribute("widgetId")];};_11.getEnclosingWidget=function(_1d){while(_1d){var id=_1d.getAttribute&&_1d.getAttribute("widgetId");if(id){return _12[id];}_1d=_1d.parentNode;}return null;};_11._isElementShown=function(_1e){var _1f=_10.style(_1e);return (_1f.visibility!="hidden")&&(_1f.visibility!="collapsed")&&(_1f.display!="none")&&(_10.attr(_1e,"type")!="hidden");};_11.isTabNavigable=function(_20){if(_10.attr(_20,"disabled")){return false;}else{if(_10.hasAttr(_20,"tabIndex")){return _10.attr(_20,"tabIndex")>=0;}else{switch(_20.nodeName.toLowerCase()){case "a":return _10.hasAttr(_20,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return true;case "iframe":if(_10.isMoz){return _20.contentDocument.designMode=="on";}else{if(_10.isWebKit){var doc=_20.contentDocument,_21=doc&&doc.body;return _21&&_21.contentEditable=="true";}else{doc=_20.contentWindow.document;_21=doc&&doc.body;return _21&&_21.firstChild&&_21.firstChild.contentEditable=="true";}}default:return _20.contentEditable=="true";}}}};_11._getTabNavigable=function(_22){var _23,_24,_25,_26,_27,_28;var _29=function(_2a){_10.query("> *",_2a).forEach(function(_2b){var _2c=_11._isElementShown(_2b);if(_2c&&_11.isTabNavigable(_2b)){var _2d=_10.attr(_2b,"tabIndex");if(!_10.hasAttr(_2b,"tabIndex")||_2d==0){if(!_23){_23=_2b;}_24=_2b;}else{if(_2d>0){if(!_25||_2d<_26){_26=_2d;_25=_2b;}if(!_27||_2d>=_28){_28=_2d;_27=_2b;}}}}if(_2c&&_2b.nodeName.toUpperCase()!="SELECT"){_29(_2b);}});};if(_11._isElementShown(_22)){_29(_22);}return {first:_23,last:_24,lowest:_25,highest:_27};};_11.getFirstInTabbingOrder=function(_2e){var _2f=_11._getTabNavigable(_10.byId(_2e));return _2f.lowest?_2f.lowest:_2f.first;};_11.getLastInTabbingOrder=function(_30){var _31=_11._getTabNavigable(_10.byId(_30));return _31.last?_31.last:_31.highest;};_11.defaultDuration=_10.config["defaultDuration"]||200;})(dojo,dijit);}