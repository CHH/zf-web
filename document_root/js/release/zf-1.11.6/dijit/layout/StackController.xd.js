/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dijit.layout.StackController"],["require","dijit._Widget"],["require","dijit._Templated"],["require","dijit._Container"],["require","dijit.form.ToggleButton"],["requireLocalization","dijit","common",null,"ROOT,ar,ca,cs,da,de,el,es,fi,fr,he,hu,it,ja,ko,nb,nl,pl,pt,pt-pt,ru,sk,sl,sv,th,tr,zh,zh-tw","ROOT,ar,ca,cs,da,de,el,es,fi,fr,he,hu,it,ja,ko,nb,nl,pl,pt,pt-pt,ru,sk,sl,sv,th,tr,zh,zh-tw"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dijit.layout.StackController"]){_4._hasResource["dijit.layout.StackController"]=true;_4.provide("dijit.layout.StackController");_4.require("dijit._Widget");_4.require("dijit._Templated");_4.require("dijit._Container");_4.require("dijit.form.ToggleButton");_4.declare("dijit.layout.StackController",[_5._Widget,_5._Templated,_5._Container],{templateString:"<span wairole='tablist' dojoAttachEvent='onkeypress' class='dijitStackController'></span>",containerId:"",buttonWidget:"dijit.layout._StackButton",postCreate:function(){_5.setWaiRole(this.domNode,"tablist");this.pane2button={};this.pane2handles={};this.subscribe(this.containerId+"-startup","onStartup");this.subscribe(this.containerId+"-addChild","onAddChild");this.subscribe(this.containerId+"-removeChild","onRemoveChild");this.subscribe(this.containerId+"-selectChild","onSelectChild");this.subscribe(this.containerId+"-containerKeyPress","onContainerKeyPress");},onStartup:function(_7){_4.forEach(_7.children,this.onAddChild,this);if(_7.selected){this.onSelectChild(_7.selected);}},destroy:function(){for(var _8 in this.pane2button){this.onRemoveChild(_5.byId(_8));}this.inherited(arguments);},onAddChild:function(_9,_a){var _b=_4.doc.createElement("span");this.domNode.appendChild(_b);var _c=_4.getObject(this.buttonWidget);var _d=new _c({id:this.id+"_"+_9.id,label:_9.title,showLabel:_9.showTitle,iconClass:_9.iconClass,closeButton:_9.closable,title:_9.tooltip},_b);_5.setWaiState(_d.focusNode,"selected","false");this.pane2handles[_9.id]=[this.connect(_9,"attr",function(_e,_f){if(arguments.length==2){var _10={title:"label",showTitle:"showLabel",iconClass:"iconClass",closable:"closeButton",tooltip:"title"}[_e];if(_10){_d.attr(_10,_f);}}}),this.connect(_d,"onClick",_4.hitch(this,"onButtonClick",_9)),this.connect(_d,"onClickCloseButton",_4.hitch(this,"onCloseButtonClick",_9))];this.addChild(_d,_a);this.pane2button[_9.id]=_d;_9.controlButton=_d;if(!this._currentChild){_d.focusNode.setAttribute("tabIndex","0");_5.setWaiState(_d.focusNode,"selected","true");this._currentChild=_9;}if(!this.isLeftToRight()&&_4.isIE&&this._rectifyRtlTabList){this._rectifyRtlTabList();}},onRemoveChild:function(_11){if(this._currentChild===_11){this._currentChild=null;}_4.forEach(this.pane2handles[_11.id],this.disconnect,this);delete this.pane2handles[_11.id];var _12=this.pane2button[_11.id];if(_12){this.removeChild(_12);delete this.pane2button[_11.id];_12.destroy();}delete _11.controlButton;},onSelectChild:function(_13){if(!_13){return;}if(this._currentChild){var _14=this.pane2button[this._currentChild.id];_14.attr("checked",false);_5.setWaiState(_14.focusNode,"selected","false");_14.focusNode.setAttribute("tabIndex","-1");}var _15=this.pane2button[_13.id];_15.attr("checked",true);_5.setWaiState(_15.focusNode,"selected","true");this._currentChild=_13;_15.focusNode.setAttribute("tabIndex","0");var _16=_5.byId(this.containerId);_5.setWaiState(_16.containerNode,"labelledby",_15.id);},onButtonClick:function(_17){var _18=_5.byId(this.containerId);_18.selectChild(_17);},onCloseButtonClick:function(_19){var _1a=_5.byId(this.containerId);_1a.closeChild(_19);if(this._currentChild){var b=this.pane2button[this._currentChild.id];if(b){_5.focus(b.focusNode||b.domNode);}}},adjacent:function(_1b){if(!this.isLeftToRight()&&(!this.tabPosition||/top|bottom/.test(this.tabPosition))){_1b=!_1b;}var _1c=this.getChildren();var _1d=_4.indexOf(_1c,this.pane2button[this._currentChild.id]);var _1e=_1b?1:_1c.length-1;return _1c[(_1d+_1e)%_1c.length];},onkeypress:function(e){if(this.disabled||e.altKey){return;}var _1f=null;if(e.ctrlKey||!e._djpage){var k=_4.keys;switch(e.charOrCode){case k.LEFT_ARROW:case k.UP_ARROW:if(!e._djpage){_1f=false;}break;case k.PAGE_UP:if(e.ctrlKey){_1f=false;}break;case k.RIGHT_ARROW:case k.DOWN_ARROW:if(!e._djpage){_1f=true;}break;case k.PAGE_DOWN:if(e.ctrlKey){_1f=true;}break;case k.DELETE:if(this._currentChild.closable){this.onCloseButtonClick(this._currentChild);}_4.stopEvent(e);break;default:if(e.ctrlKey){if(e.charOrCode===k.TAB){this.adjacent(!e.shiftKey).onClick();_4.stopEvent(e);}else{if(e.charOrCode=="w"){if(this._currentChild.closable){this.onCloseButtonClick(this._currentChild);}_4.stopEvent(e);}}}}if(_1f!==null){this.adjacent(_1f).onClick();_4.stopEvent(e);}}},onContainerKeyPress:function(_20){_20.e._djpage=_20.page;this.onkeypress(_20.e);}});_4.declare("dijit.layout._StackButton",_5.form.ToggleButton,{tabIndex:"-1",postCreate:function(evt){_5.setWaiRole((this.focusNode||this.domNode),"tab");this.inherited(arguments);},onClick:function(evt){_5.focus(this.focusNode);},onClickCloseButton:function(evt){evt.stopPropagation();}});}}};});