/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dijit._editor.plugins.Print"],["require","dijit._editor._Plugin"],["require","dijit.form.Button"],["require","dojo.i18n"],["requireLocalization","dijit._editor","commands",null,"ROOT,ar,ca,cs,da,de,el,es,fi,fr,he,hu,it,ja,ko,nb,nl,pl,pt,pt-pt,ru,sk,sl,sv,th,tr,zh,zh-tw","ROOT,ar,ca,cs,da,de,el,es,fi,fr,he,hu,it,ja,ko,nb,nl,pl,pt,pt-pt,ru,sk,sl,sv,th,tr,zh,zh-tw"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dijit._editor.plugins.Print"]){_4._hasResource["dijit._editor.plugins.Print"]=true;_4.provide("dijit._editor.plugins.Print");_4.require("dijit._editor._Plugin");_4.require("dijit.form.Button");_4.require("dojo.i18n");_4.declare("dijit._editor.plugins.Print",_5._editor._Plugin,{_initButton:function(){var _7=_4.i18n.getLocalization("dijit._editor","commands");this.button=new _5.form.Button({label:_7["print"],showLabel:false,iconClass:this.iconClassPrefix+" "+this.iconClassPrefix+"Print",tabIndex:"-1",onClick:_4.hitch(this,"_print")});},setEditor:function(_8){this.editor=_8;this._initButton();this.editor.onLoadDeferred.addCallback(_4.hitch(this,function(){if(!this.editor.iframe.contentWindow["print"]){this.button.attr("disabled",true);}}));},_print:function(){var _9=this.editor.iframe;if(_9.contentWindow["print"]){if(!_4.isOpera&&!_4.isChrome){_5.focus(_9);_9.contentWindow.print();}else{var _a=this.editor.document;var _b=this.editor.attr("value");_b="<html><head><meta http-equiv='Content-Type' "+"content='text/html; charset='UTF-8'></head><body>"+_b+"</body></html>";var _c=window.open("javascript: ''","","status=0,menubar=0,location=0,toolbar=0,"+"width=1,height=1,resizable=0,scrollbars=0");_c.document.open();_c.document.write(_b);_c.document.close();var _d=[];var _e=_a.getElementsByTagName("style");if(_e){var i;for(i=0;i<_e.length;i++){var _f=_e[i].innerHTML;var _10=_c.document.createElement("style");_10.appendChild(_c.document.createTextNode(_f));_c.document.getElementsByTagName("head")[0].appendChild(_10);}}_c.print();_c.close();}}}});_4.subscribe(_5._scopeName+".Editor.getPlugin",null,function(o){if(o.plugin){return;}var _11=o.args.name.toLowerCase();if(_11==="print"){o.plugin=new _5._editor.plugins.Print({command:"print"});}});}}};});