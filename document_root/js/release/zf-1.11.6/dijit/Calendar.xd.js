/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dijit.Calendar"],["require","dojo.cldr.supplemental"],["require","dojo.date"],["require","dojo.date.locale"],["require","dijit._Widget"],["require","dijit._Templated"],["require","dijit._CssStateMixin"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dijit.Calendar"]){_4._hasResource["dijit.Calendar"]=true;_4.provide("dijit.Calendar");_4.require("dojo.cldr.supplemental");_4.require("dojo.date");_4.require("dojo.date.locale");_4.require("dijit._Widget");_4.require("dijit._Templated");_4.require("dijit._CssStateMixin");_4.declare("dijit.Calendar",[_5._Widget,_5._Templated,_5._CssStateMixin],{templateString:_4.cache("dijit","templates/Calendar.html","<table cellspacing=\"0\" cellpadding=\"0\" class=\"dijitCalendarContainer\" role=\"grid\" dojoAttachEvent=\"onkeypress: _onKeyPress\">\n\t<thead>\n\t\t<tr class=\"dijitReset dijitCalendarMonthContainer\" valign=\"top\">\n\t\t\t<th class='dijitReset dijitCalendarArrow' dojoAttachPoint=\"decrementMonth\">\n\t\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitCalendarIncrementControl dijitCalendarDecrease\" waiRole=\"presentation\">\n\t\t\t\t<span dojoAttachPoint=\"decreaseArrowNode\" class=\"dijitA11ySideArrow\">-</span>\n\t\t\t</th>\n\t\t\t<th class='dijitReset' colspan=\"5\">\n\t\t\t\t<div class=\"dijitVisible\">\n\t\t\t\t\t<div class=\"dijitPopup dijitMenu dijitMenuPassive dijitHidden\" dojoAttachPoint=\"monthDropDown\" dojoAttachEvent=\"onmouseup: _onMonthSelect, onmouseover: _onMenuHover, onmouseout: _onMenuHover\">\n\t\t\t\t\t\t<div class=\"dijitCalendarMonthLabelTemplate dijitCalendarMonthLabel\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div dojoAttachPoint=\"monthLabelSpacer\" class=\"dijitSpacer\"></div>\n\t\t\t\t<div dojoAttachPoint=\"monthLabelNode\" class=\"dijitCalendarMonthLabel dijitInline dijitVisible\" dojoAttachEvent=\"onmousedown: _onMonthToggle\"></div>\n\t\t\t</th>\n\t\t\t<th class='dijitReset dijitCalendarArrow' dojoAttachPoint=\"incrementMonth\">\n\t\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitCalendarIncrementControl dijitCalendarIncrease\" waiRole=\"presentation\">\n\t\t\t\t<span dojoAttachPoint=\"increaseArrowNode\" class=\"dijitA11ySideArrow\">+</span>\n\t\t\t</th>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<th class=\"dijitReset dijitCalendarDayLabelTemplate\" role=\"columnheader\"><span class=\"dijitCalendarDayLabel\"></span></th>\n\t\t</tr>\n\t</thead>\n\t<tbody dojoAttachEvent=\"onclick: _onDayClick, onmouseover: _onDayMouseOver, onmouseout: _onDayMouseOut, onmousedown: _onDayMouseDown, onmouseup: _onDayMouseUp\" class=\"dijitReset dijitCalendarBodyContainer\">\n\t\t<tr class=\"dijitReset dijitCalendarWeekTemplate\" role=\"row\">\n\t\t\t<td class=\"dijitReset dijitCalendarDateTemplate\" role=\"gridcell\"><span class=\"dijitCalendarDateLabel\"></span></td>\n\t\t</tr>\n\t</tbody>\n\t<tfoot class=\"dijitReset dijitCalendarYearContainer\">\n\t\t<tr>\n\t\t\t<td class='dijitReset' valign=\"top\" colspan=\"7\">\n\t\t\t\t<h3 class=\"dijitCalendarYearLabel\">\n\t\t\t\t\t<span dojoAttachPoint=\"previousYearLabelNode\" class=\"dijitInline dijitCalendarPreviousYear\"></span>\n\t\t\t\t\t<span dojoAttachPoint=\"currentYearLabelNode\" class=\"dijitInline dijitCalendarSelectedYear\"></span>\n\t\t\t\t\t<span dojoAttachPoint=\"nextYearLabelNode\" class=\"dijitInline dijitCalendarNextYear\"></span>\n\t\t\t\t</h3>\n\t\t\t</td>\n\t\t</tr>\n\t</tfoot>\n</table>\n"),value:new Date(),datePackage:"dojo.date",dayWidth:"narrow",tabIndex:"0",baseClass:"dijitCalendar",cssStateNodes:{"decrementMonth":"dijitCalendarArrow","incrementMonth":"dijitCalendarArrow","previousYearLabelNode":"dijitCalendarPreviousYear","nextYearLabelNode":"dijitCalendarNextYear"},attributeMap:_4.delegate(_5._Widget.prototype.attributeMap,{tabIndex:"domNode"}),setValue:function(_7){_4.deprecated("dijit.Calendar:setValue() is deprecated.  Use attr('value', ...) instead.","","2.0");this.attr("value",_7);},_getValueAttr:function(){var _8=new this.dateClassObj(this.value);_8.setHours(0,0,0,0);if(_8.getDate()<this.value.getDate()){_8=this.dateFuncObj.add(_8,"hour",1);}return _8;},_setValueAttr:function(_9){if(!this.value||this.dateFuncObj.compare(_9,this.value)){_9=new this.dateClassObj(_9);_9.setHours(1);this.displayMonth=new this.dateClassObj(_9);if(!this.isDisabledDate(_9,this.lang)){this.value=_9;this.onChange(this.attr("value"));}_4.attr(this.domNode,"aria-label",this.dateLocaleModule.format(_9,{selector:"date",formatLength:"full"}));this._populateGrid();}},_setText:function(_a,_b){while(_a.firstChild){_a.removeChild(_a.firstChild);}_a.appendChild(_4.doc.createTextNode(_b));},_populateGrid:function(){var _c=this.displayMonth;_c.setDate(1);var _d=_c.getDay(),_e=this.dateFuncObj.getDaysInMonth(_c),_f=this.dateFuncObj.getDaysInMonth(this.dateFuncObj.add(_c,"month",-1)),_10=new this.dateClassObj(),_11=_4.cldr.supplemental.getFirstDayOfWeek(this.lang);if(_11>_d){_11-=7;}_4.query(".dijitCalendarDateTemplate",this.domNode).forEach(function(_12,i){i+=_11;var _13=new this.dateClassObj(_c),_14,_15="dijitCalendar",adj=0;if(i<_d){_14=_f-_d+i+1;adj=-1;_15+="Previous";}else{if(i>=(_d+_e)){_14=i-_d-_e+1;adj=1;_15+="Next";}else{_14=i-_d+1;_15+="Current";}}if(adj){_13=this.dateFuncObj.add(_13,"month",adj);}_13.setDate(_14);if(!this.dateFuncObj.compare(_13,_10,"date")){_15="dijitCalendarCurrentDate "+_15;}if(this._isSelectedDate(_13,this.lang)){_15="dijitCalendarSelectedDate "+_15;}if(this.isDisabledDate(_13,this.lang)){_15="dijitCalendarDisabledDate "+_15;}var _16=this.getClassForDate(_13,this.lang);if(_16){_15=_16+" "+_15;}_12.className=_15+"Month dijitCalendarDateTemplate";_12.dijitDateValue=_13.valueOf();var _17=_4.query(".dijitCalendarDateLabel",_12)[0],_18=_13.getDateLocalized?_13.getDateLocalized(this.lang):_13.getDate();this._setText(_17,_18);},this);var _19=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang);this._setText(this.monthLabelNode,_19[_c.getMonth()]);var y=_c.getFullYear()-1;var d=new this.dateClassObj();_4.forEach(["previous","current","next"],function(_1a){d.setFullYear(y++);this._setText(this[_1a+"YearLabelNode"],this.dateLocaleModule.format(d,{selector:"year",locale:this.lang}));},this);var _1b=this;var _1c=function(_1d,_1e,adj){_1b._connects.push(_5.typematic.addMouseListener(_1b[_1d],_1b,function(_1f){if(_1f>=0){_1b._adjustDisplay(_1e,adj);}},0.8,500));};_1c("incrementMonth","month",1);_1c("decrementMonth","month",-1);_1c("nextYearLabelNode","year",1);_1c("previousYearLabelNode","year",-1);},goToToday:function(){this.attr("value",this.dateClassObj());},constructor:function(_20){var _21=(_20.datePackage&&(_20.datePackage!="dojo.date"))?_20.datePackage+".Date":"Date";this.dateClassObj=_4.getObject(_21,false);this.datePackage=_20.datePackage||this.datePackage;this.dateFuncObj=_4.getObject(this.datePackage,false);this.dateLocaleModule=_4.getObject(this.datePackage+".locale",false);},postMixInProperties:function(){if(isNaN(this.value)){delete this.value;}this.inherited(arguments);},postCreate:function(){this.inherited(arguments);_4.setSelectable(this.domNode,false);var _22=_4.hitch(this,function(_23,n){var _24=_4.query(_23,this.domNode)[0];for(var i=0;i<n;i++){_24.parentNode.appendChild(_24.cloneNode(true));}});_22(".dijitCalendarDayLabelTemplate",6);_22(".dijitCalendarDateTemplate",6);_22(".dijitCalendarWeekTemplate",5);var _25=this.dateLocaleModule.getNames("days",this.dayWidth,"standAlone",this.lang);var _26=_4.cldr.supplemental.getFirstDayOfWeek(this.lang);_4.query(".dijitCalendarDayLabel",this.domNode).forEach(function(_27,i){this._setText(_27,_25[(i+_26)%7]);},this);var _28=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang);_22(".dijitCalendarMonthLabelTemplate",_28.length-1);_4.query(".dijitCalendarMonthLabelTemplate",this.domNode).forEach(function(_29,i){_4.attr(_29,"month",i);this._setText(_29,_28[i]);_4.place(_29.cloneNode(true),this.monthLabelSpacer);},this);var _2a=this.value;this.value=null;this.attr("value",new this.dateClassObj(_2a));},_onMenuHover:function(e){_4.stopEvent(e);_4.toggleClass(e.target,"dijitMenuItemHover");},_adjustDisplay:function(_2b,_2c){this.displayMonth=this.dateFuncObj.add(this.displayMonth,_2b,_2c);this._populateGrid();},_onMonthToggle:function(evt){_4.stopEvent(evt);if(evt.type=="mousedown"){var _2d=_4.position(this.monthLabelNode);var dim={width:_2d.w+"px",top:-this.displayMonth.getMonth()*_2d.h+"px"};if((_4.isIE&&_4.isQuirks)||_4.isIE<7){dim.left=-_2d.w/2+"px";}_4.style(this.monthDropDown,dim);this._popupHandler=this.connect(document,"onmouseup","_onMonthToggle");}else{this.disconnect(this._popupHandler);delete this._popupHandler;}_4.toggleClass(this.monthDropDown,"dijitHidden");_4.toggleClass(this.monthLabelNode,"dijitVisible");},_onMonthSelect:function(evt){this._onMonthToggle(evt);this.displayMonth.setMonth(_4.attr(evt.target,"month"));this._populateGrid();},_onDayClick:function(evt){_4.stopEvent(evt);for(var _2e=evt.target;_2e&&!_2e.dijitDateValue;_2e=_2e.parentNode){}if(_2e&&!_4.hasClass(_2e,"dijitCalendarDisabledDate")){this.attr("value",_2e.dijitDateValue);this.onValueSelected(this.attr("value"));}},_onDayMouseOver:function(evt){var _2f=_4.hasClass(evt.target,"dijitCalendarDateLabel")?evt.target.parentNode:evt.target;if(_2f&&(_2f.dijitDateValue||_2f==this.previousYearLabelNode||_2f==this.nextYearLabelNode)){_4.addClass(_2f,"dijitCalendarHoveredDate");this._currentNode=_2f;}},_onDayMouseOut:function(evt){if(!this._currentNode){return;}if(evt.relatedTarget.parentNode==this._currentNode){return;}_4.removeClass(this._currentNode,"dijitCalendarHoveredDate");if(_4.hasClass(this._currentNode,"dijitCalendarActiveDate")){_4.removeClass(this._currentNode,"dijitCalendarActiveDate");}this._currentNode=null;},_onDayMouseDown:function(evt){var _30=evt.target.parentNode;if(_30&&_30.dijitDateValue){_4.addClass(_30,"dijitCalendarActiveDate");this._currentNode=_30;}},_onDayMouseUp:function(evt){var _31=evt.target.parentNode;if(_31&&_31.dijitDateValue){_4.removeClass(_31,"dijitCalendarActiveDate");}},_onKeyPress:function(evt){var dk=_4.keys,_32=-1,_33,_34=this.value;switch(evt.keyCode){case dk.RIGHT_ARROW:_32=1;case dk.LEFT_ARROW:_33="day";if(!this.isLeftToRight()){_32*=-1;}break;case dk.DOWN_ARROW:_32=1;case dk.UP_ARROW:_33="week";break;case dk.PAGE_DOWN:_32=1;case dk.PAGE_UP:_33=evt.ctrlKey?"year":"month";break;case dk.END:_34=this.dateFuncObj.add(_34,"month",1);_33="day";case dk.HOME:_34=new Date(_34).setDate(1);break;case dk.ENTER:this.onValueSelected(this.attr("value"));break;case dk.ESCAPE:default:return;}_4.stopEvent(evt);if(_33){_34=this.dateFuncObj.add(_34,_33,_32);}this.attr("value",_34);},onValueSelected:function(_35){},onChange:function(_36){},_isSelectedDate:function(_37,_38){return !this.dateFuncObj.compare(_37,this.value,"date");},isDisabledDate:function(_39,_3a){},getClassForDate:function(_3b,_3c){}});}}};});